<?xml version="1.0" standalone="no"?>

<svg
width="100%"
height="200"
version="1.1"
baseProfile="full"
onload="init()"
xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink"
xmlns:ev="http://www.w3.org/2001/xml-events">

<script type="text/ecmascript">
<![CDATA[

// This file is an example SVG+JavaScript document for displaying
// a Z paragraph in which well-formed formulae can be selected by
// clicking the mouse.  Contributed to CZT by Ian Toyn and Petra Malik.

// Global state:
var curWff = null;		// The currently selected well-formed formula

// init -- initialisation of global state.
// This is the handler for event onload.
function init()
{
}

// inSelected -- is the given wff in the current wff?
function inSelected(wff)
{
	if (wff.getAttributeNS(null, "id") == "wff_root" || curWff == null) {
		return (false);
	} else if (wff == curWff) {
		return (true);
	} else {
		return (inSelected(wff.parentNode));
	}
}

// deselect -- make there be no current selection.
// This is the handler for event onclick on the background rect.
function deselect()
{
	if (curWff != null) {
		curWff.removeAttributeNS(null, "fill");
	}
	curWff = null;
}

// select -- adjust the current selection appropriately.
// This is the handler for event onclick on a text.
function select(evt)
{
	var selText = evt.target;
	if (curWff != null) {
		curWff.removeAttributeNS(null, "fill");
	}
	if (inSelected(selText.parentNode) && curWff.parentNode != null) {
		do {
			curWff = curWff.parentNode;
		} while (curWff.getAttributeNS(null, "sel") != "1");
	} else {
		curWff = selText.parentNode;
	}
	curWff.setAttributeNS(null, "fill", "white");
}

]]>
</script>

<rect x="10" y="10" width="400" height="200" fill="silver" outline="none" onclick="deselect()"/>
<g id="wff_root" fill="black" sel="1">
  <line x1="30" y1="50" x2="45" y2="50" stroke="black"
    onclick="deselect()"/>
  <line x1="130" y1="50" x2="220" y2="50" stroke="black"
    onclick="deselect()"/>
  <line x1="220" y1="50" x2="220" y2="60" stroke="black"
    onclick="deselect()"/>
  <g sel="1"><text x="50" y="50" font-family="CZT"
    onclick="select(evt)">BirthdayBook</text></g>
  <g sel="1">
    <g sel="0">
      <g sel="1"><text x="50" y="80" font-family="CZT"
        onclick="select(evt)">known</text></g>
      <text x="95" y="80" font-family="CZT"
        onclick="select(evt)">:</text>
      <g sel="1">
        <text x="105" y="80" font-family="CZT"
          onclick="select(evt)">&#x2119;</text>
        <g sel="1">
          <text x="115" y="80" font-family="CZT"
            onclick="select(evt)">NAME</text>
        </g>
      </g>
    </g>
    <g sel="0">
      <g sel="1"><text x="50" y="100" font-family="CZT"
        onclick="select(evt)">birthday</text></g>
      <text x="105" y="100" font-family="CZT"
        onclick="select(evt)">:</text>
      <g sel="1">
        <g sel="1"><text x="115" y="100" font-family="CZT"
          onclick="select(evt)">NAME</text></g>
        <g sel="1"><text x="155" y="100" font-family="CZT"
          onclick="select(evt)">&#x21F8;</text></g>
        <g sel="1"><text x="175" y="100" font-family="CZT"
          onclick="select(evt)">DATE</text></g>
      </g>
    </g>
    <line x1="30" y1="110" x2="90" y2="110" stroke="black"
      onclick="deselect()"/>
    <g sel="1">
      <g sel="1"><text x="50" y="130" font-family="CZT"
        onclick="select(evt)">known</text></g>
      <text x="95" y="130" font-family="CZT"
        onclick="select(evt)">=</text>
      <g sel="1">
        <g sel="1"><text x="110" y="130" font-family="CZT"
          onclick="select(evt)">dom</text></g>
        <g sel="1"><text x="140" y="130" font-family="CZT"
          onclick="select(evt)">birthday</text></g>
      </g>
    </g>
  </g>
  <line x1="220" y1="140" x2="220" y2="130" stroke="black"
    onclick="deselect()"/>
  <line x1="30" y1="140" x2="220" y2="140" stroke="black"
    onclick="deselect()"/>
  <line x1="30" y1="50" x2="30" y2="140" stroke="black"
    onclick="deselect()"/>
</g>

</svg>
