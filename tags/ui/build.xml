<project name="ui" default="all">
  <property name="czt.home" location=".."/>
  <property file="${czt.home}/czt.properties"/>
  <property name="ui.jar.dir" location="${czt.home}/${jar.dir}"/>
  <property name="jar.file" location="${ui.jar.dir}/${ui.jar.file}"/>
  <property name="ui.src.dir" location="src/main/java"/>
  <property name="ui.build.dir" location="build"/>
  <property name="ui.api.dir" location="doc/api"/>

  <path id="classpath">
    <pathelement location="${ui.jar.dir}/${session.jar.file}"/>
    <pathelement location="${ui.jar.dir}/${parser.jar.file}"/>
    <pathelement location="${ui.jar.dir}/${util.jar.file}"/>
    <pathelement location="${ui.jar.dir}/${corejava.core.jar.file}"/>
  </path>

  <target name="init">
    <tstamp/>
    <mkdir dir="${ui.build.dir}/classes"/>
  </target>

  <target name="all" depends="install, doc"
    description="build the jar files and the documentation"/>

  <target name="install" depends="compile"
          description="build and install the jar files">
    <mkdir dir="${ui.jar.dir}"/>
    <jar jarfile="${jar.file}">
      <fileset dir="${ui.build.dir}/classes"/>
      <fileset dir="src/main/resources"/>
    </jar>
  </target>

  <target name="compile" depends="init"
          description="compile the sources">
    <javac
      srcdir="${ui.src.dir}"
      destdir="${ui.build.dir}/classes"
      debug="${debug}"
      debuglevel="${debuglevel}"
      optimize="${optimize}">
      <compilerarg value="${compilerarg}"/>
      <classpath refid="classpath"/>
    </javac>
  </target>

  <target name="doc" depends="api"
    description="build all the documentation"/>

  <target name="api"
          description="build the API documentation">
    <mkdir dir="${ui.api.dir}"/>
    <javadoc
      destdir="${ui.api.dir}"
      private="true">
      <packageset dir="${ui.src.dir}"/>
      <tag name="czt.todo" description="To do:"/>
      <classpath refid="classpath"/>
    </javadoc>
  </target>
  
  <target name="clean"
          description="clean up">
    <delete dir="${ui.build.dir}"/>
    <delete dir="${ui.api.dir}"/>
  </target>
</project>
