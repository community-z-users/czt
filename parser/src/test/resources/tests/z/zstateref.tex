
\begin{zsection}
   \SECTION zstateref \parents zstate\_toolkit
\end{zsection}

\begin{axdef}
   foo: \nat
\where
   foo = 1
\end{axdef}

\begin{axdef}
   bar: \nat
\where
   bar > foo
\end{axdef}

\zstate
\begin{schema}{S}
   x: \nat
\where
   bar > x
\end{schema}

\zstinit
\begin{schema}{SInit}
   S~'
\where
   x' = 0
\end{schema}

\zastate
\begin{schema}{AState}
   x: \power \nat
\where
  x \neq \emptyset
\end{schema}

\zastinit
\begin{schema}{ASInit}
   AState~'
\where
   x' = \{ 0 \}
\end{schema}

\zcstate
\begin{schema}{CState}
  y: \seq \nat
\where
   y \neq \langle \rangle
\end{schema}

\zcstinit
\begin{schema}{CStInit}
   CState~'
\where
  y' = \langle 0 \rangle
\end{schema}

\zretrieve
\begin{schema}{Retr}
   AState \\
   CState
\where
   \ran~y = x
\end{schema}

One schema with no z state info
\begin{schema}{Nothing}
   \Delta AState
\where
   true
\end{schema}

\begin{schema}{NothingAgain}
   \Delta CState
\where
   true
\end{schema}

\begin{schema}{AOp}
   \Delta AState \\
   i?: \nat
\where
   x' = x \cup \{i?\}
\end{schema}

\zrefines{AOp}
\begin{schema}{COp}
   \Delta CState \\
   i?: \nat
\where
   y' = y \cat \langle i? \rangle
\end{schema}

PS: horizontally defined schemas *cannot* have state tags. That's because
unboxed paragraphs accept multiple items and would mean more complicated lexing.