<?xml version="1.0"?>
<project name="corejava-tests" default="run">
  <property name="czt.home" location="../.."/>
  <property file="${czt.home}/czt.properties"/>

  <path id="classpath">
    <pathelement path="${jwsdp.classpath}"/>
    <fileset dir="${czt.home}/${jar.dir}">
      <include name="*.jar"/>
    </fileset>
    <pathelement location="."/>
    <pathelement path="${java.class.path}"/>
  </path>

  <target name="compile">
    <javac srcdir="." destdir="." debug="yes">
      <classpath refid="classpath"/>
    </javac>
  </target>

  <target name="run" depends="compile">
    <junit dir="${basedir}" fork="yes" printsummary="on">
      <jvmarg value="-Dczt.home=${czt.home}"/>
      <formatter type="xml"/>
      <test name="net.sourceforge.czt.z.impl.AstTest"/>
      <test name="net.sourceforge.czt.z.jaxb.JaxbXmlWriterReaderTest"/>
      <test name="net.sourceforge.czt.z.util.OperatorNameTest"/>
      <classpath refid="classpath"/>
      <assertions>
        <enable/>
      </assertions>
    </junit>
  </target>

  <target name="test-report">
    <junitreport todir=".">
      <fileset dir=".">
        <include name="TEST-*.xml"/>
      </fileset>
      <report format="frames" todir="build/report"/>
    </junitreport>
  </target>

  <target name="clean">
    <delete>
      <fileset dir="${basedir}" includes="**/*.class"/>
    </delete>
    <delete>
      <fileset dir="${basedir}" includes="**/*.log*"/>
    </delete>
    <delete>
      <fileset dir="${basedir}" includes="**/junit*.properties"/>
    </delete>
    <delete file="ozspec.xml"/>
  </target>
</project>
