\chapter{Auxiliary toolkit definitions}\label{apD}

\begin{zsection}
  \SECTION apD \parents ch3
\end{zsection}

Originally Appendix D (p.$225$). In this document it appears after the original
Chapter $4$ because we need the definitions of $NAME$ and $AbPurse$ from
Chapter $3$ and $PayDetails$ from chapter $4$. These functions were used in
conjectures in the original Chapter $2$.

\section{Total abstract balance}

\begin{LADef}[Total balance of abstract purses]
\begin{axdef}
   totalAbBalance: (NAME \ffun AbPurse) \fun \nat
\where
%   \znote{Use braces for empty set to allow better automation}
%   \Label{rule dTotalAbBalanceBase}
      totalAbBalance~\{~\} = 0
   \also
%   \Label{rule dTotalAbBalanceInduc}
      \forall w: (NAME \ffun AbPurse); n: NAME; AbPurse | n \notin \dom~w @ \\
          \t1 totalAbBalance~( \{~ n \mapsto \theta AbPurse ~\} \cup w) = \\
                \t3 balance + totalAbBalance~w
\end{axdef}~\end{LADef}

\subsection*{Proofs}

\begin{LDCheck}\begin{zproof}[totalAbBalance\$domainCheck]
   prove;
\end{zproof}\end{LDCheck}

\section{Total lost value}

\begin{LADef}[Total lost of abstract purses]
\begin{axdef}
   totalLost: (NAME \ffun AbPurse) \fun \nat
\where
%   \Label{rule dTotalLostBase}
      totalAbBalance~\{~\} = 0
   \also
%   \Label{rule dTotalLostInduc}
      \forall w: (NAME \ffun AbPurse); n: NAME; AbPurse | n \notin \dom~w @ \\
          \t1 totalLost~( \{~ n \mapsto \theta AbPurse ~\} \cup w) = \\
                \t3 balance + totalLost~w
\end{axdef}~\end{LADef}

\subsection*{Proofs}

\begin{LDCheck}\begin{zproof}[totalLost\$domainCheck]
   prove;
\end{zproof}\end{LDCheck}

\newpage
\section{Summary}\label{apD.summary}

\ldefsummary %
\lthmsummary %
\lthmaddeddefsummary %
\lthmaddedthmsummary %
\lzevessummary %
%\lpscriptsummary
