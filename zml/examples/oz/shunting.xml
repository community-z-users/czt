<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Spec Version="1.3" xmlns="http://czt.sourceforge.net/zml">
    <NarrSect>
        <Anns>
            <LocAnn Col="1" Line="1" Loc="shunting.tex"/>
        </Anns>
        <Content>\documentclass[11pt,a4paper]{article}
\usepackage{oz}
\usepackage{wizard}
\begin{document}
\noindent

</Content>
    </NarrSect>
    <ZSect>
        <Name>shunting</Name>
        <Parent>
            <Anns>
                <LocAnn Col="30" Line="8" Loc="shunting.tex"/>
            </Anns>
            <Word>oz_toolkit</Word>
        </Parent>
        <Parent>
            <Anns>
                <LocAnn Col="43" Line="8" Loc="shunting.tex"/>
            </Anns>
            <Word>standard_toolkit</Word>
        </Parent>
        <LatexMarkupPara/>
        <NarrPara>
            <Anns>
                <LocAnn Col="15" Line="9" Loc="shunting.tex"/>
            </Anns>
            <Content>

First, we begin by defining the set of positions on the board. We define
the numbering on the board as if it were a square (6x7), but don't include
the positions not on the board. Hence define
</Content>
        </NarrPara>
        <AxPara Box="OmitBox">
            <SchText>
                <ConstDecl>
                    <DeclName>
                        <Anns>
                            <LocAnn Col="3" Line="15" Loc="shunting.tex"/>
                        </Anns>
                        <Word>Posn</Word>
                    </DeclName>
                    <ApplExpr Mixfix="true">
                        <RefExpr Mixfix="false">
                            <RefName>
                                <Word> _ .. _ </Word>
                            </RefName>
                        </RefExpr>
                        <TupleExpr>
                            <ApplExpr Mixfix="true">
                                <Anns>
                                    <LocAnn Col="25" Line="15" Loc="shunting.tex"/>
                                </Anns>
                                <RefExpr Mixfix="false">
                                    <RefName>
                                        <Word> _ ∪ _ </Word>
                                    </RefName>
                                </RefExpr>
                                <TupleExpr>
                                    <SetExpr>
                                        <Anns>
                                            <LocAnn Col="11" Line="15" Loc="shunting.tex"/>
                                        </Anns>
                                        <NumExpr Value="3">
                                            <Anns>
                                                <LocAnn Col="13" Line="15" Loc="shunting.tex"/>
                                            </Anns>
                                        </NumExpr>
                                        <NumExpr Value="4">
                                            <Anns>
                                                <LocAnn Col="15" Line="15" Loc="shunting.tex"/>
                                            </Anns>
                                        </NumExpr>
                                        <NumExpr Value="10">
                                            <Anns>
                                                <LocAnn Col="17" Line="15" Loc="shunting.tex"/>
                                            </Anns>
                                        </NumExpr>
                                        <NumExpr Value="11">
                                            <Anns>
                                                <LocAnn Col="20" Line="15" Loc="shunting.tex"/>
                                            </Anns>
                                        </NumExpr>
                                    </SetExpr>
                                    <NumExpr Value="15">
                                        <Anns>
                                            <LocAnn Col="30" Line="15" Loc="shunting.tex"/>
                                        </Anns>
                                    </NumExpr>
                                </TupleExpr>
                            </ApplExpr>
                            <ApplExpr Mixfix="true">
                                <RefExpr Mixfix="false">
                                    <RefName>
                                        <Word> _ ∪ _ </Word>
                                    </RefName>
                                </RefExpr>
                                <TupleExpr>
                                    <NumExpr Value="28">
                                        <Anns>
                                            <LocAnn Col="34" Line="15" Loc="shunting.tex"/>
                                        </Anns>
                                    </NumExpr>
                                    <SetExpr>
                                        <Anns>
                                            <LocAnn Col="42" Line="15" Loc="shunting.tex"/>
                                        </Anns>
                                        <NumExpr Value="31">
                                            <Anns>
                                                <LocAnn Col="44" Line="15" Loc="shunting.tex"/>
                                            </Anns>
                                        </NumExpr>
                                        <NumExpr Value="32">
                                            <Anns>
                                                <LocAnn Col="47" Line="15" Loc="shunting.tex"/>
                                            </Anns>
                                        </NumExpr>
                                        <NumExpr Value="38">
                                            <Anns>
                                                <LocAnn Col="50" Line="15" Loc="shunting.tex"/>
                                            </Anns>
                                        </NumExpr>
                                        <NumExpr Value="39">
                                            <Anns>
                                                <LocAnn Col="53" Line="15" Loc="shunting.tex"/>
                                            </Anns>
                                        </NumExpr>
                                    </SetExpr>
                                </TupleExpr>
                            </ApplExpr>
                        </TupleExpr>
                    </ApplExpr>
                </ConstDecl>
            </SchText>
        </AxPara>
        <NarrPara>
            <Anns>
                <LocAnn Col="10" Line="16" Loc="shunting.tex"/>
            </Anns>
            <Content>

We then define a relationship $next$, between cell positions, which
indicates the neighbours of cells.
</Content>
        </NarrPara>
        <OptempPara Cat="Relation">
            <Anns>
                <LocAnn Col="2" Line="21" Loc="shunting.tex"/>
            </Anns>
            <Operand List="false"/>
            <Operator>
                <Word>next</Word>
            </Operator>
            <Operand List="false"/>
        </OptempPara>
        <NarrPara>
            <Anns>
                <LocAnn Col="10" Line="22" Loc="shunting.tex"/>
            </Anns>
            <Content>

</Content>
        </NarrPara>
        <AxPara Box="AxBox">
            <SchText>
                <VarDecl>
                    <Anns>
                        <LocAnn Col="20" Line="25" Loc="shunting.tex"/>
                    </Anns>
                    <DeclName>
                        <Word> _ next _ </Word>
                    </DeclName>
                    <RefExpr Mixfix="true">
                        <Anns>
                            <LocAnn Col="27" Line="25" Loc="shunting.tex"/>
                        </Anns>
                        <RefName>
                            <Word> _ ↔ _ </Word>
                        </RefName>
                        <RefExpr Mixfix="false">
                            <Anns>
                                <LocAnn Col="22" Line="25" Loc="shunting.tex"/>
                            </Anns>
                            <RefName>
                                <Anns>
                                    <LocAnn Col="22" Line="25" Loc="shunting.tex"/>
                                </Anns>
                                <Word>Posn</Word>
                            </RefName>
                        </RefExpr>
                        <RefExpr Mixfix="false">
                            <Anns>
                                <LocAnn Col="32" Line="25" Loc="shunting.tex"/>
                            </Anns>
                            <RefName>
                                <Anns>
                                    <LocAnn Col="32" Line="25" Loc="shunting.tex"/>
                                </Anns>
                                <Word>Posn</Word>
                            </RefName>
                        </RefExpr>
                    </RefExpr>
                </VarDecl>
                <ForallPred>
                    <Anns>
                        <LocAnn Col="3" Line="27" Loc="shunting.tex"/>
                    </Anns>
                    <SchText>
                        <VarDecl>
                            <Anns>
                                <LocAnn Col="14" Line="27" Loc="shunting.tex"/>
                            </Anns>
                            <DeclName>
                                <Anns>
                                    <LocAnn Col="11" Line="27" Loc="shunting.tex"/>
                                </Anns>
                                <Word>m</Word>
                            </DeclName>
                            <DeclName>
                                <Anns>
                                    <LocAnn Col="13" Line="27" Loc="shunting.tex"/>
                                </Anns>
                                <Word>n</Word>
                            </DeclName>
                            <RefExpr Mixfix="false">
                                <Anns>
                                    <LocAnn Col="16" Line="27" Loc="shunting.tex"/>
                                </Anns>
                                <RefName>
                                    <Anns>
                                        <LocAnn Col="16" Line="27" Loc="shunting.tex"/>
                                    </Anns>
                                    <Word>Posn</Word>
                                </RefName>
                            </RefExpr>
                        </VarDecl>
                    </SchText>
                    <IffPred>
                        <Anns>
                            <LocAnn Col="18" Line="28" Loc="shunting.tex"/>
                        </Anns>
                        <MemPred Mixfix="true">
                            <Anns>
                                <LocAnn Col="11" Line="28" Loc="shunting.tex"/>
                            </Anns>
                            <TupleExpr>
                                <RefExpr Mixfix="false">
                                    <Anns>
                                        <LocAnn Col="9" Line="28" Loc="shunting.tex"/>
                                    </Anns>
                                    <RefName>
                                        <Anns>
                                            <LocAnn Col="9" Line="28" Loc="shunting.tex"/>
                                        </Anns>
                                        <Word>m</Word>
                                    </RefName>
                                </RefExpr>
                                <RefExpr Mixfix="false">
                                    <Anns>
                                        <LocAnn Col="16" Line="28" Loc="shunting.tex"/>
                                    </Anns>
                                    <RefName>
                                        <Anns>
                                            <LocAnn Col="16" Line="28" Loc="shunting.tex"/>
                                        </Anns>
                                        <Word>n</Word>
                                    </RefName>
                                </RefExpr>
                            </TupleExpr>
                            <RefExpr Mixfix="false">
                                <RefName>
                                    <Word> _ next _ </Word>
                                </RefName>
                            </RefExpr>
                        </MemPred>
                        <OrPred>
                            <Anns>
                                <LocAnn Col="41" Line="29" Loc="shunting.tex"/>
                            </Anns>
                            <MemPred Mixfix="false">
                                <Anns>
                                    <LocAnn Col="18" Line="29" Loc="shunting.tex"/>
                                </Anns>
                                <ApplExpr Mixfix="true">
                                    <Anns>
                                        <LocAnn Col="14" Line="29" Loc="shunting.tex"/>
                                    </Anns>
                                    <RefExpr Mixfix="false">
                                        <RefName>
                                            <Word> _ − _ </Word>
                                        </RefName>
                                    </RefExpr>
                                    <TupleExpr>
                                        <RefExpr Mixfix="false">
                                            <Anns>
                                                <LocAnn Col="12" Line="29" Loc="shunting.tex"/>
                                            </Anns>
                                            <RefName>
                                                <Anns>
                                                    <LocAnn Col="12" Line="29" Loc="shunting.tex"/>
                                                </Anns>
                                                <Word>m</Word>
                                            </RefName>
                                        </RefExpr>
                                        <RefExpr Mixfix="false">
                                            <Anns>
                                                <LocAnn Col="16" Line="29" Loc="shunting.tex"/>
                                            </Anns>
                                            <RefName>
                                                <Anns>
                                                    <LocAnn Col="16" Line="29" Loc="shunting.tex"/>
                                                </Anns>
                                                <Word>n</Word>
                                            </RefName>
                                        </RefExpr>
                                    </TupleExpr>
                                </ApplExpr>
                                <SetExpr>
                                    <Anns>
                                        <LocAnn Col="22" Line="29" Loc="shunting.tex"/>
                                    </Anns>
                                    <ApplExpr Mixfix="true">
                                        <Anns>
                                            <LocAnn Col="25" Line="29" Loc="shunting.tex"/>
                                        </Anns>
                                        <RefExpr Mixfix="false">
                                            <RefName>
                                                <Word>- _ </Word>
                                            </RefName>
                                        </RefExpr>
                                        <NumExpr Value="7">
                                            <Anns>
                                                <LocAnn Col="33" Line="29" Loc="shunting.tex"/>
                                            </Anns>
                                        </NumExpr>
                                    </ApplExpr>
                                    <NumExpr Value="7">
                                        <Anns>
                                            <LocAnn Col="36" Line="29" Loc="shunting.tex"/>
                                        </Anns>
                                    </NumExpr>
                                </SetExpr>
                            </MemPred>
                            <AndPred Op="And">
                                <Anns>
                                    <LocAnn Col="43" Line="30" Loc="shunting.tex"/>
                                    <ParenAnn/>
                                </Anns>
                                <MemPred Mixfix="false">
                                    <Anns>
                                        <LocAnn Col="19" Line="30" Loc="shunting.tex"/>
                                    </Anns>
                                    <ApplExpr Mixfix="true">
                                        <Anns>
                                            <LocAnn Col="15" Line="30" Loc="shunting.tex"/>
                                        </Anns>
                                        <RefExpr Mixfix="false">
                                            <RefName>
                                                <Word> _ − _ </Word>
                                            </RefName>
                                        </RefExpr>
                                        <TupleExpr>
                                            <RefExpr Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="13" Line="30" Loc="shunting.tex"/>
                                                </Anns>
                                                <RefName>
                                                    <Anns>
                                                        <LocAnn Col="13" Line="30" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <Word>m</Word>
                                                </RefName>
                                            </RefExpr>
                                            <RefExpr Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="17" Line="30" Loc="shunting.tex"/>
                                                </Anns>
                                                <RefName>
                                                    <Anns>
                                                        <LocAnn Col="17" Line="30" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <Word>n</Word>
                                                </RefName>
                                            </RefExpr>
                                        </TupleExpr>
                                    </ApplExpr>
                                    <SetExpr>
                                        <Anns>
                                            <LocAnn Col="23" Line="30" Loc="shunting.tex"/>
                                        </Anns>
                                        <ApplExpr Mixfix="true">
                                            <Anns>
                                                <LocAnn Col="26" Line="30" Loc="shunting.tex"/>
                                            </Anns>
                                            <RefExpr Mixfix="false">
                                                <RefName>
                                                    <Word>- _ </Word>
                                                </RefName>
                                            </RefExpr>
                                            <NumExpr Value="1">
                                                <Anns>
                                                    <LocAnn Col="34" Line="30" Loc="shunting.tex"/>
                                                </Anns>
                                            </NumExpr>
                                        </ApplExpr>
                                        <NumExpr Value="1">
                                            <Anns>
                                                <LocAnn Col="38" Line="30" Loc="shunting.tex"/>
                                            </Anns>
                                        </NumExpr>
                                    </SetExpr>
                                </MemPred>
                                <MemPred Mixfix="true">
                                    <Anns>
                                        <LocAnn Col="58" Line="30" Loc="shunting.tex"/>
                                    </Anns>
                                    <ApplExpr Mixfix="true">
                                        <Anns>
                                            <LocAnn Col="51" Line="30" Loc="shunting.tex"/>
                                        </Anns>
                                        <RefExpr Mixfix="false">
                                            <RefName>
                                                <Word> _ div _ </Word>
                                            </RefName>
                                        </RefExpr>
                                        <TupleExpr>
                                            <RefExpr Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="49" Line="30" Loc="shunting.tex"/>
                                                </Anns>
                                                <RefName>
                                                    <Anns>
                                                        <LocAnn Col="49" Line="30" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <Word>m</Word>
                                                </RefName>
                                            </RefExpr>
                                            <NumExpr Value="7">
                                                <Anns>
                                                    <LocAnn Col="56" Line="30" Loc="shunting.tex"/>
                                                </Anns>
                                            </NumExpr>
                                        </TupleExpr>
                                    </ApplExpr>
                                    <SetExpr>
                                        <ApplExpr Mixfix="true">
                                            <Anns>
                                                <LocAnn Col="62" Line="30" Loc="shunting.tex"/>
                                            </Anns>
                                            <RefExpr Mixfix="false">
                                                <RefName>
                                                    <Word> _ div _ </Word>
                                                </RefName>
                                            </RefExpr>
                                            <TupleExpr>
                                                <RefExpr Mixfix="false">
                                                    <Anns>
                                                        <LocAnn Col="60" Line="30" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <RefName>
                                                        <Anns>
                                                            <LocAnn Col="60" Line="30" Loc="shunting.tex"/>
                                                        </Anns>
                                                        <Word>n</Word>
                                                    </RefName>
                                                </RefExpr>
                                                <NumExpr Value="7">
                                                    <Anns>
                                                        <LocAnn Col="67" Line="30" Loc="shunting.tex"/>
                                                    </Anns>
                                                </NumExpr>
                                            </TupleExpr>
                                        </ApplExpr>
                                    </SetExpr>
                                </MemPred>
                            </AndPred>
                        </OrPred>
                    </IffPred>
                </ForallPred>
            </SchText>
        </AxPara>
        <NarrPara>
            <Anns>
                <LocAnn Col="12" Line="31" Loc="shunting.tex"/>
            </Anns>
            <Content>

Next, we define the class $Circle$, which represents a circle on the
board. To move the circle, a direction is entered. Hence, we define the
$DIR$, which represents directions.

</Content>
        </NarrPara>
        <FreePara>
            <Anns>
                <LocAnn Col="31" Line="38" Loc="shunting.tex"/>
            </Anns>
            <Freetype>
                <Anns>
                    <LocAnn Col="7" Line="38" Loc="shunting.tex"/>
                </Anns>
                <DeclName>
                    <Anns>
                        <LocAnn Col="3" Line="38" Loc="shunting.tex"/>
                    </Anns>
                    <Word>DIR</Word>
                </DeclName>
                <Branch>
                    <Anns>
                        <LocAnn Col="11" Line="38" Loc="shunting.tex"/>
                    </Anns>
                    <DeclName>
                        <Anns>
                            <LocAnn Col="11" Line="38" Loc="shunting.tex"/>
                        </Anns>
                        <Word>LEFT</Word>
                    </DeclName>
                </Branch>
                <Branch>
                    <Anns>
                        <LocAnn Col="18" Line="38" Loc="shunting.tex"/>
                    </Anns>
                    <DeclName>
                        <Anns>
                            <LocAnn Col="18" Line="38" Loc="shunting.tex"/>
                        </Anns>
                        <Word>RIGHT</Word>
                    </DeclName>
                </Branch>
                <Branch>
                    <Anns>
                        <LocAnn Col="26" Line="38" Loc="shunting.tex"/>
                    </Anns>
                    <DeclName>
                        <Anns>
                            <LocAnn Col="26" Line="38" Loc="shunting.tex"/>
                        </Anns>
                        <Word>UP</Word>
                    </DeclName>
                </Branch>
                <Branch>
                    <Anns>
                        <LocAnn Col="31" Line="38" Loc="shunting.tex"/>
                    </Anns>
                    <DeclName>
                        <Anns>
                            <LocAnn Col="31" Line="38" Loc="shunting.tex"/>
                        </Anns>
                        <Word>DOWN</Word>
                    </DeclName>
                </Branch>
            </Freetype>
        </FreePara>
        <NarrPara>
            <Anns>
                <LocAnn Col="10" Line="39" Loc="shunting.tex"/>
            </Anns>
            <Content>

</Content>
        </NarrPara>
        <ns1:ClassPara xmlns:ns1="http://czt.sourceforge.net/object-z">
            <ns1:Name>
                <Anns>
                    <LocAnn Col="15" Line="41" Loc="shunting.tex"/>
                </Anns>
                <Word>Circle</Word>
            </ns1:Name>
            <ns1:State>
                <VarDecl>
                    <Anns>
                        <LocAnn Col="7" Line="44" Loc="shunting.tex"/>
                    </Anns>
                    <DeclName>
                        <Anns>
                            <LocAnn Col="3" Line="44" Loc="shunting.tex"/>
                        </Anns>
                        <Word>posn</Word>
                    </DeclName>
                    <RefExpr Mixfix="false">
                        <Anns>
                            <LocAnn Col="9" Line="44" Loc="shunting.tex"/>
                        </Anns>
                        <RefName>
                            <Anns>
                                <LocAnn Col="9" Line="44" Loc="shunting.tex"/>
                            </Anns>
                            <Word>Posn</Word>
                        </RefName>
                    </RefExpr>
                </VarDecl>
            </ns1:State>
            <ns1:Operation>
                <ns1:Name>
                    <Anns>
                        <LocAnn Col="16" Line="46" Loc="shunting.tex"/>
                    </Anns>
                    <Word>move</Word>
                </ns1:Name>
                <ns1:OperationBox>
                    <InclDecl>
                        <ApplExpr Mixfix="false">
                            <Anns>
                                <LocAnn Col="14" Line="47" Loc="shunting.tex"/>
                            </Anns>
                            <RefExpr Mixfix="false">
                                <Anns>
                                    <LocAnn Col="3" Line="47" Loc="shunting.tex"/>
                                </Anns>
                                <RefName>
                                    <Anns>
                                        <LocAnn Col="3" Line="47" Loc="shunting.tex"/>
                                    </Anns>
                                    <Word>Δ</Word>
                                </RefName>
                            </RefExpr>
                            <RefExpr Mixfix="false">
                                <Anns>
                                    <LocAnn Col="10" Line="47" Loc="shunting.tex"/>
                                    <ParenAnn/>
                                </Anns>
                                <RefName>
                                    <Anns>
                                        <LocAnn Col="10" Line="47" Loc="shunting.tex"/>
                                    </Anns>
                                    <Word>posn</Word>
                                </RefName>
                            </RefExpr>
                        </ApplExpr>
                    </InclDecl>
                    <VarDecl>
                        <Anns>
                            <LocAnn Col="6" Line="48" Loc="shunting.tex"/>
                        </Anns>
                        <DeclName>
                            <Anns>
                                <LocAnn Col="3" Line="48" Loc="shunting.tex"/>
                            </Anns>
                            <Word>d</Word>
                            <InStroke/>
                        </DeclName>
                        <RefExpr Mixfix="false">
                            <Anns>
                                <LocAnn Col="8" Line="48" Loc="shunting.tex"/>
                            </Anns>
                            <RefName>
                                <Anns>
                                    <LocAnn Col="8" Line="48" Loc="shunting.tex"/>
                                </Anns>
                                <Word>DIR</Word>
                            </RefName>
                        </RefExpr>
                    </VarDecl>
                    <AndPred Op="NL">
                        <Anns>
                            <LocAnn Col="37" Line="53" Loc="shunting.tex"/>
                        </Anns>
                        <AndPred Op="NL">
                            <Anns>
                                <LocAnn Col="40" Line="52" Loc="shunting.tex"/>
                            </Anns>
                            <AndPred Op="NL">
                                <Anns>
                                    <LocAnn Col="39" Line="51" Loc="shunting.tex"/>
                                </Anns>
                                <AndPred Op="NL">
                                    <Anns>
                                        <LocAnn Col="19" Line="50" Loc="shunting.tex"/>
                                    </Anns>
                                    <MemPred Mixfix="true">
                                        <Anns>
                                            <LocAnn Col="8" Line="50" Loc="shunting.tex"/>
                                        </Anns>
                                        <TupleExpr>
                                            <RefExpr Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="3" Line="50" Loc="shunting.tex"/>
                                                </Anns>
                                                <RefName>
                                                    <Anns>
                                                        <LocAnn Col="3" Line="50" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <Word>posn</Word>
                                                </RefName>
                                            </RefExpr>
                                            <RefExpr Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="13" Line="50" Loc="shunting.tex"/>
                                                </Anns>
                                                <RefName>
                                                    <Anns>
                                                        <LocAnn Col="13" Line="50" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <Word>posn</Word>
                                                    <NextStroke/>
                                                </RefName>
                                            </RefExpr>
                                        </TupleExpr>
                                        <RefExpr Mixfix="false">
                                            <RefName>
                                                <Word> _ next _ </Word>
                                            </RefName>
                                        </RefExpr>
                                    </MemPred>
                                    <ImpliesPred>
                                        <Anns>
                                            <LocAnn Col="13" Line="51" Loc="shunting.tex"/>
                                        </Anns>
                                        <MemPred Mixfix="true">
                                            <Anns>
                                                <LocAnn Col="6" Line="51" Loc="shunting.tex"/>
                                            </Anns>
                                            <RefExpr Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="3" Line="51" Loc="shunting.tex"/>
                                                </Anns>
                                                <RefName>
                                                    <Anns>
                                                        <LocAnn Col="3" Line="51" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <Word>d</Word>
                                                    <InStroke/>
                                                </RefName>
                                            </RefExpr>
                                            <SetExpr>
                                                <RefExpr Mixfix="false">
                                                    <Anns>
                                                        <LocAnn Col="8" Line="51" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <RefName>
                                                        <Anns>
                                                            <LocAnn Col="8" Line="51" Loc="shunting.tex"/>
                                                        </Anns>
                                                        <Word>LEFT</Word>
                                                    </RefName>
                                                </RefExpr>
                                            </SetExpr>
                                        </MemPred>
                                        <MemPred Mixfix="true">
                                            <Anns>
                                                <LocAnn Col="28" Line="51" Loc="shunting.tex"/>
                                            </Anns>
                                            <RefExpr Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="22" Line="51" Loc="shunting.tex"/>
                                                </Anns>
                                                <RefName>
                                                    <Anns>
                                                        <LocAnn Col="22" Line="51" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <Word>posn</Word>
                                                    <NextStroke/>
                                                </RefName>
                                            </RefExpr>
                                            <SetExpr>
                                                <ApplExpr Mixfix="true">
                                                    <Anns>
                                                        <LocAnn Col="35" Line="51" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <RefExpr Mixfix="false">
                                                        <RefName>
                                                            <Word> _ − _ </Word>
                                                        </RefName>
                                                    </RefExpr>
                                                    <TupleExpr>
                                                        <RefExpr Mixfix="false">
                                                            <Anns>
                                                                <LocAnn Col="30" Line="51" Loc="shunting.tex"/>
                                                            </Anns>
                                                            <RefName>
                                                                <Anns>
                                                                    <LocAnn Col="30" Line="51" Loc="shunting.tex"/>
                                                                </Anns>
                                                                <Word>posn</Word>
                                                            </RefName>
                                                        </RefExpr>
                                                        <NumExpr Value="1">
                                                            <Anns>
                                                                <LocAnn Col="37" Line="51" Loc="shunting.tex"/>
                                                            </Anns>
                                                        </NumExpr>
                                                    </TupleExpr>
                                                </ApplExpr>
                                            </SetExpr>
                                        </MemPred>
                                    </ImpliesPred>
                                </AndPred>
                                <ImpliesPred>
                                    <Anns>
                                        <LocAnn Col="14" Line="52" Loc="shunting.tex"/>
                                    </Anns>
                                    <MemPred Mixfix="true">
                                        <Anns>
                                            <LocAnn Col="6" Line="52" Loc="shunting.tex"/>
                                        </Anns>
                                        <RefExpr Mixfix="false">
                                            <Anns>
                                                <LocAnn Col="3" Line="52" Loc="shunting.tex"/>
                                            </Anns>
                                            <RefName>
                                                <Anns>
                                                    <LocAnn Col="3" Line="52" Loc="shunting.tex"/>
                                                </Anns>
                                                <Word>d</Word>
                                                <InStroke/>
                                            </RefName>
                                        </RefExpr>
                                        <SetExpr>
                                            <RefExpr Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="8" Line="52" Loc="shunting.tex"/>
                                                </Anns>
                                                <RefName>
                                                    <Anns>
                                                        <LocAnn Col="8" Line="52" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <Word>RIGHT</Word>
                                                </RefName>
                                            </RefExpr>
                                        </SetExpr>
                                    </MemPred>
                                    <MemPred Mixfix="true">
                                        <Anns>
                                            <LocAnn Col="29" Line="52" Loc="shunting.tex"/>
                                        </Anns>
                                        <RefExpr Mixfix="false">
                                            <Anns>
                                                <LocAnn Col="23" Line="52" Loc="shunting.tex"/>
                                            </Anns>
                                            <RefName>
                                                <Anns>
                                                    <LocAnn Col="23" Line="52" Loc="shunting.tex"/>
                                                </Anns>
                                                <Word>posn</Word>
                                                <NextStroke/>
                                            </RefName>
                                        </RefExpr>
                                        <SetExpr>
                                            <ApplExpr Mixfix="true">
                                                <Anns>
                                                    <LocAnn Col="36" Line="52" Loc="shunting.tex"/>
                                                </Anns>
                                                <RefExpr Mixfix="false">
                                                    <RefName>
                                                        <Word> _ + _ </Word>
                                                    </RefName>
                                                </RefExpr>
                                                <TupleExpr>
                                                    <RefExpr Mixfix="false">
                                                        <Anns>
                                                            <LocAnn Col="31" Line="52" Loc="shunting.tex"/>
                                                        </Anns>
                                                        <RefName>
                                                            <Anns>
                                                                <LocAnn Col="31" Line="52" Loc="shunting.tex"/>
                                                            </Anns>
                                                            <Word>posn</Word>
                                                        </RefName>
                                                    </RefExpr>
                                                    <NumExpr Value="1">
                                                        <Anns>
                                                            <LocAnn Col="38" Line="52" Loc="shunting.tex"/>
                                                        </Anns>
                                                    </NumExpr>
                                                </TupleExpr>
                                            </ApplExpr>
                                        </SetExpr>
                                    </MemPred>
                                </ImpliesPred>
                            </AndPred>
                            <ImpliesPred>
                                <Anns>
                                    <LocAnn Col="11" Line="53" Loc="shunting.tex"/>
                                </Anns>
                                <MemPred Mixfix="true">
                                    <Anns>
                                        <LocAnn Col="6" Line="53" Loc="shunting.tex"/>
                                    </Anns>
                                    <RefExpr Mixfix="false">
                                        <Anns>
                                            <LocAnn Col="3" Line="53" Loc="shunting.tex"/>
                                        </Anns>
                                        <RefName>
                                            <Anns>
                                                <LocAnn Col="3" Line="53" Loc="shunting.tex"/>
                                            </Anns>
                                            <Word>d</Word>
                                            <InStroke/>
                                        </RefName>
                                    </RefExpr>
                                    <SetExpr>
                                        <RefExpr Mixfix="false">
                                            <Anns>
                                                <LocAnn Col="8" Line="53" Loc="shunting.tex"/>
                                            </Anns>
                                            <RefName>
                                                <Anns>
                                                    <LocAnn Col="8" Line="53" Loc="shunting.tex"/>
                                                </Anns>
                                                <Word>UP</Word>
                                            </RefName>
                                        </RefExpr>
                                    </SetExpr>
                                </MemPred>
                                <MemPred Mixfix="true">
                                    <Anns>
                                        <LocAnn Col="26" Line="53" Loc="shunting.tex"/>
                                    </Anns>
                                    <RefExpr Mixfix="false">
                                        <Anns>
                                            <LocAnn Col="20" Line="53" Loc="shunting.tex"/>
                                        </Anns>
                                        <RefName>
                                            <Anns>
                                                <LocAnn Col="20" Line="53" Loc="shunting.tex"/>
                                            </Anns>
                                            <Word>posn</Word>
                                            <NextStroke/>
                                        </RefName>
                                    </RefExpr>
                                    <SetExpr>
                                        <ApplExpr Mixfix="true">
                                            <Anns>
                                                <LocAnn Col="33" Line="53" Loc="shunting.tex"/>
                                            </Anns>
                                            <RefExpr Mixfix="false">
                                                <RefName>
                                                    <Word> _ − _ </Word>
                                                </RefName>
                                            </RefExpr>
                                            <TupleExpr>
                                                <RefExpr Mixfix="false">
                                                    <Anns>
                                                        <LocAnn Col="28" Line="53" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <RefName>
                                                        <Anns>
                                                            <LocAnn Col="28" Line="53" Loc="shunting.tex"/>
                                                        </Anns>
                                                        <Word>posn</Word>
                                                    </RefName>
                                                </RefExpr>
                                                <NumExpr Value="7">
                                                    <Anns>
                                                        <LocAnn Col="35" Line="53" Loc="shunting.tex"/>
                                                    </Anns>
                                                </NumExpr>
                                            </TupleExpr>
                                        </ApplExpr>
                                    </SetExpr>
                                </MemPred>
                            </ImpliesPred>
                        </AndPred>
                        <ImpliesPred>
                            <Anns>
                                <LocAnn Col="13" Line="54" Loc="shunting.tex"/>
                            </Anns>
                            <MemPred Mixfix="true">
                                <Anns>
                                    <LocAnn Col="6" Line="54" Loc="shunting.tex"/>
                                </Anns>
                                <RefExpr Mixfix="false">
                                    <Anns>
                                        <LocAnn Col="3" Line="54" Loc="shunting.tex"/>
                                    </Anns>
                                    <RefName>
                                        <Anns>
                                            <LocAnn Col="3" Line="54" Loc="shunting.tex"/>
                                        </Anns>
                                        <Word>d</Word>
                                        <InStroke/>
                                    </RefName>
                                </RefExpr>
                                <SetExpr>
                                    <RefExpr Mixfix="false">
                                        <Anns>
                                            <LocAnn Col="8" Line="54" Loc="shunting.tex"/>
                                        </Anns>
                                        <RefName>
                                            <Anns>
                                                <LocAnn Col="8" Line="54" Loc="shunting.tex"/>
                                            </Anns>
                                            <Word>DOWN</Word>
                                        </RefName>
                                    </RefExpr>
                                </SetExpr>
                            </MemPred>
                            <MemPred Mixfix="true">
                                <Anns>
                                    <LocAnn Col="27" Line="54" Loc="shunting.tex"/>
                                </Anns>
                                <RefExpr Mixfix="false">
                                    <Anns>
                                        <LocAnn Col="22" Line="54" Loc="shunting.tex"/>
                                    </Anns>
                                    <RefName>
                                        <Anns>
                                            <LocAnn Col="22" Line="54" Loc="shunting.tex"/>
                                        </Anns>
                                        <Word>posn</Word>
                                    </RefName>
                                </RefExpr>
                                <SetExpr>
                                    <ApplExpr Mixfix="true">
                                        <Anns>
                                            <LocAnn Col="34" Line="54" Loc="shunting.tex"/>
                                        </Anns>
                                        <RefExpr Mixfix="false">
                                            <RefName>
                                                <Word> _ + _ </Word>
                                            </RefName>
                                        </RefExpr>
                                        <TupleExpr>
                                            <RefExpr Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="29" Line="54" Loc="shunting.tex"/>
                                                </Anns>
                                                <RefName>
                                                    <Anns>
                                                        <LocAnn Col="29" Line="54" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <Word>posn</Word>
                                                </RefName>
                                            </RefExpr>
                                            <NumExpr Value="7">
                                                <Anns>
                                                    <LocAnn Col="36" Line="54" Loc="shunting.tex"/>
                                                </Anns>
                                            </NumExpr>
                                        </TupleExpr>
                                    </ApplExpr>
                                </SetExpr>
                            </MemPred>
                        </ImpliesPred>
                    </AndPred>
                </ns1:OperationBox>
            </ns1:Operation>
        </ns1:ClassPara>
        <NarrPara>
            <Anns>
                <LocAnn Col="12" Line="56" Loc="shunting.tex"/>
            </Anns>
            <Content>

Now, we define a class $BlackCircle$ that extends the $Circle$ class to
represent a black circle by including a $count$ for the number of times a
circle is moved.

</Content>
        </NarrPara>
        <ns2:ClassPara xmlns:ns2="http://czt.sourceforge.net/object-z">
            <ns2:Name>
                <Anns>
                    <LocAnn Col="15" Line="62" Loc="shunting.tex"/>
                </Anns>
                <Word>BlackCircle</Word>
            </ns2:Name>
            <ns2:InheritedClass>
                <ns2:Name>
                    <Anns>
                        <LocAnn Col="11" Line="64" Loc="shunting.tex"/>
                    </Anns>
                    <Word>Circle</Word>
                </ns2:Name>
            </ns2:InheritedClass>
            <ns2:State>
                <VarDecl>
                    <Anns>
                        <LocAnn Col="8" Line="67" Loc="shunting.tex"/>
                    </Anns>
                    <DeclName>
                        <Anns>
                            <LocAnn Col="3" Line="67" Loc="shunting.tex"/>
                        </Anns>
                        <Word>count</Word>
                    </DeclName>
                    <RefExpr Mixfix="false">
                        <Anns>
                            <LocAnn Col="10" Line="67" Loc="shunting.tex"/>
                        </Anns>
                        <RefName>
                            <Anns>
                                <LocAnn Col="10" Line="67" Loc="shunting.tex"/>
                            </Anns>
                            <Word>ℕ</Word>
                        </RefName>
                    </RefExpr>
                </VarDecl>
            </ns2:State>
            <ns2:InitialState>
                <MemPred Mixfix="true">
                    <Anns>
                        <LocAnn Col="9" Line="71" Loc="shunting.tex"/>
                    </Anns>
                    <RefExpr Mixfix="false">
                        <Anns>
                            <LocAnn Col="3" Line="71" Loc="shunting.tex"/>
                        </Anns>
                        <RefName>
                            <Anns>
                                <LocAnn Col="3" Line="71" Loc="shunting.tex"/>
                            </Anns>
                            <Word>count</Word>
                        </RefName>
                    </RefExpr>
                    <SetExpr>
                        <NumExpr Value="0">
                            <Anns>
                                <LocAnn Col="11" Line="71" Loc="shunting.tex"/>
                            </Anns>
                        </NumExpr>
                    </SetExpr>
                </MemPred>
            </ns2:InitialState>
            <ns2:Operation>
                <ns2:Name>
                    <Anns>
                        <LocAnn Col="16" Line="74" Loc="shunting.tex"/>
                    </Anns>
                    <Word>move</Word>
                </ns2:Name>
                <ns2:OperationBox>
                    <InclDecl>
                        <ApplExpr Mixfix="false">
                            <Anns>
                                <LocAnn Col="15" Line="75" Loc="shunting.tex"/>
                            </Anns>
                            <RefExpr Mixfix="false">
                                <Anns>
                                    <LocAnn Col="3" Line="75" Loc="shunting.tex"/>
                                </Anns>
                                <RefName>
                                    <Anns>
                                        <LocAnn Col="3" Line="75" Loc="shunting.tex"/>
                                    </Anns>
                                    <Word>Δ</Word>
                                </RefName>
                            </RefExpr>
                            <RefExpr Mixfix="false">
                                <Anns>
                                    <LocAnn Col="10" Line="75" Loc="shunting.tex"/>
                                    <ParenAnn/>
                                </Anns>
                                <RefName>
                                    <Anns>
                                        <LocAnn Col="10" Line="75" Loc="shunting.tex"/>
                                    </Anns>
                                    <Word>count</Word>
                                </RefName>
                            </RefExpr>
                        </ApplExpr>
                    </InclDecl>
                    <MemPred Mixfix="true">
                        <Anns>
                            <LocAnn Col="10" Line="77" Loc="shunting.tex"/>
                        </Anns>
                        <RefExpr Mixfix="false">
                            <Anns>
                                <LocAnn Col="3" Line="77" Loc="shunting.tex"/>
                            </Anns>
                            <RefName>
                                <Anns>
                                    <LocAnn Col="3" Line="77" Loc="shunting.tex"/>
                                </Anns>
                                <Word>count</Word>
                                <NextStroke/>
                            </RefName>
                        </RefExpr>
                        <SetExpr>
                            <ApplExpr Mixfix="true">
                                <Anns>
                                    <LocAnn Col="18" Line="77" Loc="shunting.tex"/>
                                </Anns>
                                <RefExpr Mixfix="false">
                                    <RefName>
                                        <Word> _ + _ </Word>
                                    </RefName>
                                </RefExpr>
                                <TupleExpr>
                                    <RefExpr Mixfix="false">
                                        <Anns>
                                            <LocAnn Col="12" Line="77" Loc="shunting.tex"/>
                                        </Anns>
                                        <RefName>
                                            <Anns>
                                                <LocAnn Col="12" Line="77" Loc="shunting.tex"/>
                                            </Anns>
                                            <Word>count</Word>
                                        </RefName>
                                    </RefExpr>
                                    <NumExpr Value="1">
                                        <Anns>
                                            <LocAnn Col="20" Line="77" Loc="shunting.tex"/>
                                        </Anns>
                                    </NumExpr>
                                </TupleExpr>
                            </ApplExpr>
                        </SetExpr>
                    </MemPred>
                </ns2:OperationBox>
            </ns2:Operation>
        </ns2:ClassPara>
        <NarrPara>
            <Anns>
                <LocAnn Col="12" Line="79" Loc="shunting.tex"/>
            </Anns>
            <Content>

Now, we define the $Shunting$ class, which maintains the state of the
board.

</Content>
        </NarrPara>
        <ns3:ClassPara xmlns:ns3="http://czt.sourceforge.net/object-z">
            <ns3:Name>
                <Anns>
                    <LocAnn Col="15" Line="84" Loc="shunting.tex"/>
                </Anns>
                <Word>Shunting</Word>
            </ns3:Name>
            <ns3:State>
                <VarDecl>
                    <Anns>
                        <LocAnn Col="8" Line="87" Loc="shunting.tex"/>
                    </Anns>
                    <DeclName>
                        <Anns>
                            <LocAnn Col="3" Line="87" Loc="shunting.tex"/>
                        </Anns>
                        <Word>black</Word>
                    </DeclName>
                    <RefExpr Mixfix="false">
                        <Anns>
                            <LocAnn Col="10" Line="87" Loc="shunting.tex"/>
                        </Anns>
                        <RefName>
                            <Anns>
                                <LocAnn Col="10" Line="87" Loc="shunting.tex"/>
                            </Anns>
                            <Word>BlackCircle</Word>
                        </RefName>
                    </RefExpr>
                </VarDecl>
                <VarDecl>
                    <Anns>
                        <LocAnn Col="8" Line="88" Loc="shunting.tex"/>
                    </Anns>
                    <DeclName>
                        <Anns>
                            <LocAnn Col="3" Line="88" Loc="shunting.tex"/>
                        </Anns>
                        <Word>white</Word>
                    </DeclName>
                    <PowerExpr>
                        <Anns>
                            <LocAnn Col="10" Line="88" Loc="shunting.tex"/>
                        </Anns>
                        <RefExpr Mixfix="false">
                            <Anns>
                                <LocAnn Col="17" Line="88" Loc="shunting.tex"/>
                            </Anns>
                            <RefName>
                                <Anns>
                                    <LocAnn Col="17" Line="88" Loc="shunting.tex"/>
                                </Anns>
                                <Word>Circle</Word>
                            </RefName>
                        </RefExpr>
                    </PowerExpr>
                </VarDecl>
                <AndPred Op="NL">
                    <Anns>
                        <LocAnn Col="15" Line="90" Loc="shunting.tex"/>
                    </Anns>
                    <MemPred Mixfix="true">
                        <Anns>
                            <LocAnn Col="11" Line="90" Loc="shunting.tex"/>
                        </Anns>
                        <ApplExpr Mixfix="true">
                            <Anns>
                                <LocAnn Col="3" Line="90" Loc="shunting.tex"/>
                            </Anns>
                            <RefExpr Mixfix="false">
                                <RefName>
                                    <Word># _ </Word>
                                </RefName>
                            </RefExpr>
                            <RefExpr Mixfix="false">
                                <Anns>
                                    <LocAnn Col="5" Line="90" Loc="shunting.tex"/>
                                </Anns>
                                <RefName>
                                    <Anns>
                                        <LocAnn Col="5" Line="90" Loc="shunting.tex"/>
                                    </Anns>
                                    <Word>white</Word>
                                </RefName>
                            </RefExpr>
                        </ApplExpr>
                        <SetExpr>
                            <NumExpr Value="4">
                                <Anns>
                                    <LocAnn Col="13" Line="90" Loc="shunting.tex"/>
                                </Anns>
                            </NumExpr>
                        </SetExpr>
                    </MemPred>
                    <ForallPred>
                        <Anns>
                            <LocAnn Col="3" Line="91" Loc="shunting.tex"/>
                        </Anns>
                        <SchText>
                            <VarDecl>
                                <Anns>
                                    <LocAnn Col="14" Line="91" Loc="shunting.tex"/>
                                </Anns>
                                <DeclName>
                                    <Anns>
                                        <LocAnn Col="11" Line="91" Loc="shunting.tex"/>
                                    </Anns>
                                    <Word>m</Word>
                                </DeclName>
                                <DeclName>
                                    <Anns>
                                        <LocAnn Col="13" Line="91" Loc="shunting.tex"/>
                                    </Anns>
                                    <Word>n</Word>
                                </DeclName>
                                <RefExpr Mixfix="false">
                                    <Anns>
                                        <LocAnn Col="16" Line="91" Loc="shunting.tex"/>
                                    </Anns>
                                    <RefName>
                                        <Anns>
                                            <LocAnn Col="16" Line="91" Loc="shunting.tex"/>
                                        </Anns>
                                        <Word>white</Word>
                                    </RefName>
                                </RefExpr>
                            </VarDecl>
                        </SchText>
                        <AndPred Op="And">
                            <Anns>
                                <LocAnn Col="46" Line="92" Loc="shunting.tex"/>
                            </Anns>
                            <IffPred>
                                <Anns>
                                    <LocAnn Col="21" Line="92" Loc="shunting.tex"/>
                                    <ParenAnn/>
                                </Anns>
                                <MemPred Mixfix="true">
                                    <Anns>
                                        <LocAnn Col="14" Line="92" Loc="shunting.tex"/>
                                    </Anns>
                                    <TupleExpr>
                                        <RefExpr Mixfix="false">
                                            <Anns>
                                                <LocAnn Col="12" Line="92" Loc="shunting.tex"/>
                                            </Anns>
                                            <RefName>
                                                <Anns>
                                                    <LocAnn Col="12" Line="92" Loc="shunting.tex"/>
                                                </Anns>
                                                <Word>m</Word>
                                            </RefName>
                                        </RefExpr>
                                        <RefExpr Mixfix="false">
                                            <Anns>
                                                <LocAnn Col="19" Line="92" Loc="shunting.tex"/>
                                            </Anns>
                                            <RefName>
                                                <Anns>
                                                    <LocAnn Col="19" Line="92" Loc="shunting.tex"/>
                                                </Anns>
                                                <Word>n</Word>
                                            </RefName>
                                        </RefExpr>
                                    </TupleExpr>
                                    <RefExpr Mixfix="false">
                                        <RefName>
                                            <Word> _ ≠ _ </Word>
                                        </RefName>
                                    </RefExpr>
                                </MemPred>
                                <MemPred Mixfix="true">
                                    <Anns>
                                        <LocAnn Col="33" Line="92" Loc="shunting.tex"/>
                                    </Anns>
                                    <TupleExpr>
                                        <BindSelExpr>
                                            <Anns>
                                                <LocAnn Col="27" Line="92" Loc="shunting.tex"/>
                                            </Anns>
                                            <RefExpr Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="26" Line="92" Loc="shunting.tex"/>
                                                </Anns>
                                                <RefName>
                                                    <Anns>
                                                        <LocAnn Col="26" Line="92" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <Word>m</Word>
                                                </RefName>
                                            </RefExpr>
                                            <Name>
                                                <Anns>
                                                    <LocAnn Col="28" Line="92" Loc="shunting.tex"/>
                                                </Anns>
                                                <Word>posn</Word>
                                            </Name>
                                        </BindSelExpr>
                                        <BindSelExpr>
                                            <Anns>
                                                <LocAnn Col="39" Line="92" Loc="shunting.tex"/>
                                            </Anns>
                                            <RefExpr Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="38" Line="92" Loc="shunting.tex"/>
                                                </Anns>
                                                <RefName>
                                                    <Anns>
                                                        <LocAnn Col="38" Line="92" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <Word>n</Word>
                                                </RefName>
                                            </RefExpr>
                                            <Name>
                                                <Anns>
                                                    <LocAnn Col="40" Line="92" Loc="shunting.tex"/>
                                                </Anns>
                                                <Word>posn</Word>
                                            </Name>
                                        </BindSelExpr>
                                    </TupleExpr>
                                    <RefExpr Mixfix="false">
                                        <RefName>
                                            <Word> _ ≠ _ </Word>
                                        </RefName>
                                    </RefExpr>
                                </MemPred>
                            </IffPred>
                            <MemPred Mixfix="true">
                                <Anns>
                                    <LocAnn Col="18" Line="93" Loc="shunting.tex"/>
                                </Anns>
                                <TupleExpr>
                                    <BindSelExpr>
                                        <Anns>
                                            <LocAnn Col="12" Line="93" Loc="shunting.tex"/>
                                        </Anns>
                                        <RefExpr Mixfix="false">
                                            <Anns>
                                                <LocAnn Col="11" Line="93" Loc="shunting.tex"/>
                                            </Anns>
                                            <RefName>
                                                <Anns>
                                                    <LocAnn Col="11" Line="93" Loc="shunting.tex"/>
                                                </Anns>
                                                <Word>m</Word>
                                            </RefName>
                                        </RefExpr>
                                        <Name>
                                            <Anns>
                                                <LocAnn Col="13" Line="93" Loc="shunting.tex"/>
                                            </Anns>
                                            <Word>posn</Word>
                                        </Name>
                                    </BindSelExpr>
                                    <BindSelExpr>
                                        <Anns>
                                            <LocAnn Col="28" Line="93" Loc="shunting.tex"/>
                                        </Anns>
                                        <RefExpr Mixfix="false">
                                            <Anns>
                                                <LocAnn Col="23" Line="93" Loc="shunting.tex"/>
                                            </Anns>
                                            <RefName>
                                                <Anns>
                                                    <LocAnn Col="23" Line="93" Loc="shunting.tex"/>
                                                </Anns>
                                                <Word>black</Word>
                                            </RefName>
                                        </RefExpr>
                                        <Name>
                                            <Anns>
                                                <LocAnn Col="29" Line="93" Loc="shunting.tex"/>
                                            </Anns>
                                            <Word>posn</Word>
                                        </Name>
                                    </BindSelExpr>
                                </TupleExpr>
                                <RefExpr Mixfix="false">
                                    <RefName>
                                        <Word> _ ≠ _ </Word>
                                    </RefName>
                                </RefExpr>
                            </MemPred>
                        </AndPred>
                    </ForallPred>
                </AndPred>
            </ns3:State>
            <ns3:InitialState>
                <AndPred Op="NL">
                    <Anns>
                        <LocAnn Col="19" Line="97" Loc="shunting.tex"/>
                    </Anns>
                    <MemPred Mixfix="true">
                        <Anns>
                            <LocAnn Col="14" Line="97" Loc="shunting.tex"/>
                        </Anns>
                        <BindSelExpr>
                            <Anns>
                                <LocAnn Col="8" Line="97" Loc="shunting.tex"/>
                            </Anns>
                            <RefExpr Mixfix="false">
                                <Anns>
                                    <LocAnn Col="3" Line="97" Loc="shunting.tex"/>
                                </Anns>
                                <RefName>
                                    <Anns>
                                        <LocAnn Col="3" Line="97" Loc="shunting.tex"/>
                                    </Anns>
                                    <Word>black</Word>
                                </RefName>
                            </RefExpr>
                            <Name>
                                <Anns>
                                    <LocAnn Col="9" Line="97" Loc="shunting.tex"/>
                                </Anns>
                                <Word>posn</Word>
                            </Name>
                        </BindSelExpr>
                        <SetExpr>
                            <NumExpr Value="22">
                                <Anns>
                                    <LocAnn Col="16" Line="97" Loc="shunting.tex"/>
                                </Anns>
                            </NumExpr>
                        </SetExpr>
                    </MemPred>
                    <MemPred Mixfix="true">
                        <Anns>
                            <LocAnn Col="25" Line="98" Loc="shunting.tex"/>
                        </Anns>
                        <SetCompExpr>
                            <Anns>
                                <LocAnn Col="3" Line="98" Loc="shunting.tex"/>
                            </Anns>
                            <SchText>
                                <VarDecl>
                                    <Anns>
                                        <LocAnn Col="6" Line="98" Loc="shunting.tex"/>
                                    </Anns>
                                    <DeclName>
                                        <Anns>
                                            <LocAnn Col="5" Line="98" Loc="shunting.tex"/>
                                        </Anns>
                                        <Word>w</Word>
                                    </DeclName>
                                    <RefExpr Mixfix="false">
                                        <Anns>
                                            <LocAnn Col="8" Line="98" Loc="shunting.tex"/>
                                        </Anns>
                                        <RefName>
                                            <Anns>
                                                <LocAnn Col="8" Line="98" Loc="shunting.tex"/>
                                            </Anns>
                                            <Word>white</Word>
                                        </RefName>
                                    </RefExpr>
                                </VarDecl>
                            </SchText>
                            <BindSelExpr>
                                <Anns>
                                    <LocAnn Col="17" Line="98" Loc="shunting.tex"/>
                                </Anns>
                                <RefExpr Mixfix="false">
                                    <Anns>
                                        <LocAnn Col="16" Line="98" Loc="shunting.tex"/>
                                    </Anns>
                                    <RefName>
                                        <Anns>
                                            <LocAnn Col="16" Line="98" Loc="shunting.tex"/>
                                        </Anns>
                                        <Word>w</Word>
                                    </RefName>
                                </RefExpr>
                                <Name>
                                    <Anns>
                                        <LocAnn Col="18" Line="98" Loc="shunting.tex"/>
                                    </Anns>
                                    <Word>posn</Word>
                                </Name>
                            </BindSelExpr>
                        </SetCompExpr>
                        <SetExpr>
                            <SetExpr>
                                <Anns>
                                    <LocAnn Col="27" Line="98" Loc="shunting.tex"/>
                                </Anns>
                                <NumExpr Value="18">
                                    <Anns>
                                        <LocAnn Col="29" Line="98" Loc="shunting.tex"/>
                                    </Anns>
                                </NumExpr>
                                <NumExpr Value="23">
                                    <Anns>
                                        <LocAnn Col="32" Line="98" Loc="shunting.tex"/>
                                    </Anns>
                                </NumExpr>
                                <NumExpr Value="27">
                                    <Anns>
                                        <LocAnn Col="35" Line="98" Loc="shunting.tex"/>
                                    </Anns>
                                </NumExpr>
                                <NumExpr Value="32">
                                    <Anns>
                                        <LocAnn Col="38" Line="98" Loc="shunting.tex"/>
                                    </Anns>
                                </NumExpr>
                            </SetExpr>
                        </SetExpr>
                    </MemPred>
                </AndPred>
            </ns3:InitialState>
            <ns3:Operation>
                <ns3:Name>
                    <Anns>
                        <LocAnn Col="16" Line="101" Loc="shunting.tex"/>
                    </Anns>
                    <Word>end</Word>
                </ns3:Name>
                <ns3:OperationBox>
                    <VarDecl>
                        <Anns>
                            <LocAnn Col="10" Line="102" Loc="shunting.tex"/>
                        </Anns>
                        <DeclName>
                            <Anns>
                                <LocAnn Col="3" Line="102" Loc="shunting.tex"/>
                            </Anns>
                            <Word>count</Word>
                            <OutStroke/>
                        </DeclName>
                        <RefExpr Mixfix="false">
                            <Anns>
                                <LocAnn Col="12" Line="102" Loc="shunting.tex"/>
                            </Anns>
                            <RefName>
                                <Anns>
                                    <LocAnn Col="12" Line="102" Loc="shunting.tex"/>
                                </Anns>
                                <Word>ℕ</Word>
                            </RefName>
                        </RefExpr>
                    </VarDecl>
                    <AndPred Op="NL">
                        <Anns>
                            <LocAnn Col="43" Line="104" Loc="shunting.tex"/>
                        </Anns>
                        <MemPred Mixfix="true">
                            <Anns>
                                <LocAnn Col="25" Line="104" Loc="shunting.tex"/>
                            </Anns>
                            <SetCompExpr>
                                <Anns>
                                    <LocAnn Col="3" Line="104" Loc="shunting.tex"/>
                                </Anns>
                                <SchText>
                                    <VarDecl>
                                        <Anns>
                                            <LocAnn Col="6" Line="104" Loc="shunting.tex"/>
                                        </Anns>
                                        <DeclName>
                                            <Anns>
                                                <LocAnn Col="5" Line="104" Loc="shunting.tex"/>
                                            </Anns>
                                            <Word>w</Word>
                                        </DeclName>
                                        <RefExpr Mixfix="false">
                                            <Anns>
                                                <LocAnn Col="8" Line="104" Loc="shunting.tex"/>
                                            </Anns>
                                            <RefName>
                                                <Anns>
                                                    <LocAnn Col="8" Line="104" Loc="shunting.tex"/>
                                                </Anns>
                                                <Word>white</Word>
                                            </RefName>
                                        </RefExpr>
                                    </VarDecl>
                                </SchText>
                                <BindSelExpr>
                                    <Anns>
                                        <LocAnn Col="17" Line="104" Loc="shunting.tex"/>
                                    </Anns>
                                    <RefExpr Mixfix="false">
                                        <Anns>
                                            <LocAnn Col="16" Line="104" Loc="shunting.tex"/>
                                        </Anns>
                                        <RefName>
                                            <Anns>
                                                <LocAnn Col="16" Line="104" Loc="shunting.tex"/>
                                            </Anns>
                                            <Word>w</Word>
                                        </RefName>
                                    </RefExpr>
                                    <Name>
                                        <Anns>
                                            <LocAnn Col="18" Line="104" Loc="shunting.tex"/>
                                        </Anns>
                                        <Word>posn</Word>
                                    </Name>
                                </BindSelExpr>
                            </SetCompExpr>
                            <SetExpr>
                                <SetExpr>
                                    <Anns>
                                        <LocAnn Col="27" Line="104" Loc="shunting.tex"/>
                                    </Anns>
                                    <NumExpr Value="17">
                                        <Anns>
                                            <LocAnn Col="29" Line="104" Loc="shunting.tex"/>
                                        </Anns>
                                    </NumExpr>
                                    <NumExpr Value="18">
                                        <Anns>
                                            <LocAnn Col="32" Line="104" Loc="shunting.tex"/>
                                        </Anns>
                                    </NumExpr>
                                    <NumExpr Value="24">
                                        <Anns>
                                            <LocAnn Col="35" Line="104" Loc="shunting.tex"/>
                                        </Anns>
                                    </NumExpr>
                                    <NumExpr Value="25">
                                        <Anns>
                                            <LocAnn Col="38" Line="104" Loc="shunting.tex"/>
                                        </Anns>
                                    </NumExpr>
                                </SetExpr>
                            </SetExpr>
                        </MemPred>
                        <MemPred Mixfix="true">
                            <Anns>
                                <LocAnn Col="10" Line="105" Loc="shunting.tex"/>
                            </Anns>
                            <RefExpr Mixfix="false">
                                <Anns>
                                    <LocAnn Col="3" Line="105" Loc="shunting.tex"/>
                                </Anns>
                                <RefName>
                                    <Anns>
                                        <LocAnn Col="3" Line="105" Loc="shunting.tex"/>
                                    </Anns>
                                    <Word>count</Word>
                                    <OutStroke/>
                                </RefName>
                            </RefExpr>
                            <SetExpr>
                                <BindSelExpr>
                                    <Anns>
                                        <LocAnn Col="17" Line="105" Loc="shunting.tex"/>
                                    </Anns>
                                    <RefExpr Mixfix="false">
                                        <Anns>
                                            <LocAnn Col="12" Line="105" Loc="shunting.tex"/>
                                        </Anns>
                                        <RefName>
                                            <Anns>
                                                <LocAnn Col="12" Line="105" Loc="shunting.tex"/>
                                            </Anns>
                                            <Word>black</Word>
                                        </RefName>
                                    </RefExpr>
                                    <Name>
                                        <Anns>
                                            <LocAnn Col="18" Line="105" Loc="shunting.tex"/>
                                        </Anns>
                                        <Word>count</Word>
                                    </Name>
                                </BindSelExpr>
                            </SetExpr>
                        </MemPred>
                    </AndPred>
                </ns3:OperationBox>
            </ns3:Operation>
            <ns3:Operation>
                <ns3:Name>
                    <Anns>
                        <LocAnn Col="1" Line="108" Loc="shunting.tex"/>
                    </Anns>
                    <Word>move</Word>
                </ns3:Name>
                <ns3:ConjOpExpr>
                    <ns3:OpPromotionExpr>
                        <RefExpr Mixfix="false">
                            <RefName>
                                <Anns>
                                    <LocAnn Col="9" Line="108" Loc="shunting.tex"/>
                                </Anns>
                                <Word>black</Word>
                            </RefName>
                        </RefExpr>
                        <ns3:OpName>
                            <Anns>
                                <LocAnn Col="15" Line="108" Loc="shunting.tex"/>
                            </Anns>
                            <Word>move</Word>
                        </ns3:OpName>
                    </ns3:OpPromotionExpr>
                    <ns3:DistChoiceOpExpr>
                        <Anns>
                            <ParenAnn/>
                        </Anns>
                        <ns3:MainOpExpr>
                            <SchText>
                                <VarDecl>
                                    <Anns>
                                        <LocAnn Col="27" Line="109" Loc="shunting.tex"/>
                                    </Anns>
                                    <DeclName>
                                        <Anns>
                                            <LocAnn Col="22" Line="109" Loc="shunting.tex"/>
                                        </Anns>
                                        <Word>u</Word>
                                    </DeclName>
                                    <DeclName>
                                        <Anns>
                                            <LocAnn Col="25" Line="109" Loc="shunting.tex"/>
                                        </Anns>
                                        <Word>t</Word>
                                    </DeclName>
                                    <RefExpr Mixfix="false">
                                        <Anns>
                                            <LocAnn Col="29" Line="109" Loc="shunting.tex"/>
                                        </Anns>
                                        <RefName>
                                            <Anns>
                                                <LocAnn Col="29" Line="109" Loc="shunting.tex"/>
                                            </Anns>
                                            <Word>white</Word>
                                        </RefName>
                                    </RefExpr>
                                </VarDecl>
                                <AndPred Op="And">
                                    <Anns>
                                        <LocAnn Col="26" Line="110" Loc="shunting.tex"/>
                                    </Anns>
                                    <AndPred Op="And">
                                        <Anns>
                                            <LocAnn Col="58" Line="109" Loc="shunting.tex"/>
                                        </Anns>
                                        <MemPred Mixfix="true">
                                            <Anns>
                                                <LocAnn Col="44" Line="109" Loc="shunting.tex"/>
                                            </Anns>
                                            <BindSelExpr>
                                                <Anns>
                                                    <LocAnn Col="38" Line="109" Loc="shunting.tex"/>
                                                </Anns>
                                                <RefExpr Mixfix="false">
                                                    <Anns>
                                                        <LocAnn Col="37" Line="109" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <RefName>
                                                        <Anns>
                                                            <LocAnn Col="37" Line="109" Loc="shunting.tex"/>
                                                        </Anns>
                                                        <Word>t</Word>
                                                    </RefName>
                                                </RefExpr>
                                                <Name>
                                                    <Anns>
                                                        <LocAnn Col="39" Line="109" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <Word>posn</Word>
                                                </Name>
                                            </BindSelExpr>
                                            <SetExpr>
                                                <BindSelExpr>
                                                    <Anns>
                                                        <LocAnn Col="51" Line="109" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <RefExpr Mixfix="false">
                                                        <Anns>
                                                            <LocAnn Col="46" Line="109" Loc="shunting.tex"/>
                                                        </Anns>
                                                        <RefName>
                                                            <Anns>
                                                                <LocAnn Col="46" Line="109" Loc="shunting.tex"/>
                                                            </Anns>
                                                            <Word>black</Word>
                                                        </RefName>
                                                    </RefExpr>
                                                    <Name>
                                                        <Anns>
                                                            <LocAnn Col="52" Line="109" Loc="shunting.tex"/>
                                                        </Anns>
                                                        <Word>posn</Word>
                                                        <NextStroke/>
                                                    </Name>
                                                </BindSelExpr>
                                            </SetExpr>
                                        </MemPred>
                                        <MemPred Mixfix="true">
                                            <Anns>
                                                <LocAnn Col="19" Line="110" Loc="shunting.tex"/>
                                            </Anns>
                                            <TupleExpr>
                                                <RefExpr Mixfix="false">
                                                    <Anns>
                                                        <LocAnn Col="17" Line="110" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <RefName>
                                                        <Anns>
                                                            <LocAnn Col="17" Line="110" Loc="shunting.tex"/>
                                                        </Anns>
                                                        <Word>u</Word>
                                                    </RefName>
                                                </RefExpr>
                                                <RefExpr Mixfix="false">
                                                    <Anns>
                                                        <LocAnn Col="24" Line="110" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <RefName>
                                                        <Anns>
                                                            <LocAnn Col="24" Line="110" Loc="shunting.tex"/>
                                                        </Anns>
                                                        <Word>t</Word>
                                                    </RefName>
                                                </RefExpr>
                                            </TupleExpr>
                                            <RefExpr Mixfix="false">
                                                <RefName>
                                                    <Word> _ ≠ _ </Word>
                                                </RefName>
                                            </RefExpr>
                                        </MemPred>
                                    </AndPred>
                                    <MemPred Mixfix="true">
                                        <Anns>
                                            <LocAnn Col="39" Line="110" Loc="shunting.tex"/>
                                        </Anns>
                                        <TupleExpr>
                                            <BindSelExpr>
                                                <Anns>
                                                    <LocAnn Col="33" Line="110" Loc="shunting.tex"/>
                                                </Anns>
                                                <RefExpr Mixfix="false">
                                                    <Anns>
                                                        <LocAnn Col="32" Line="110" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <RefName>
                                                        <Anns>
                                                            <LocAnn Col="32" Line="110" Loc="shunting.tex"/>
                                                        </Anns>
                                                        <Word>u</Word>
                                                    </RefName>
                                                </RefExpr>
                                                <Name>
                                                    <Anns>
                                                        <LocAnn Col="34" Line="110" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <Word>posn</Word>
                                                </Name>
                                            </BindSelExpr>
                                            <BindSelExpr>
                                                <Anns>
                                                    <LocAnn Col="45" Line="110" Loc="shunting.tex"/>
                                                </Anns>
                                                <RefExpr Mixfix="false">
                                                    <Anns>
                                                        <LocAnn Col="44" Line="110" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <RefName>
                                                        <Anns>
                                                            <LocAnn Col="44" Line="110" Loc="shunting.tex"/>
                                                        </Anns>
                                                        <Word>t</Word>
                                                    </RefName>
                                                </RefExpr>
                                                <Name>
                                                    <Anns>
                                                        <LocAnn Col="46" Line="110" Loc="shunting.tex"/>
                                                    </Anns>
                                                    <Word>posn</Word>
                                                </Name>
                                            </BindSelExpr>
                                        </TupleExpr>
                                        <RefExpr Mixfix="false">
                                            <RefName>
                                                <Word> _ ≠ _ </Word>
                                            </RefName>
                                        </RefExpr>
                                    </MemPred>
                                </AndPred>
                            </SchText>
                            <ns3:ExChoiceOpExpr>
                                <ns3:OpPromotionExpr>
                                    <RefExpr Mixfix="false">
                                        <RefName>
                                            <Anns>
                                                <LocAnn Col="7" Line="111" Loc="shunting.tex"/>
                                            </Anns>
                                            <Word>t</Word>
                                        </RefName>
                                    </RefExpr>
                                    <ns3:OpName>
                                        <Anns>
                                            <LocAnn Col="9" Line="111" Loc="shunting.tex"/>
                                        </Anns>
                                        <Word>move</Word>
                                    </ns3:OpName>
                                </ns3:OpPromotionExpr>
                                <ns3:OpPromotionExpr>
                                    <ns3:OpName>
                                        <Anns>
                                            <LocAnn Col="7" Line="113" Loc="shunting.tex"/>
                                        </Anns>
                                        <Word>end</Word>
                                    </ns3:OpName>
                                </ns3:OpPromotionExpr>
                            </ns3:ExChoiceOpExpr>
                        </ns3:MainOpExpr>
                    </ns3:DistChoiceOpExpr>
                </ns3:ConjOpExpr>
            </ns3:Operation>
        </ns3:ClassPara>
        <NarrPara>
            <Anns>
                <LocAnn Col="12" Line="114" Loc="shunting.tex"/>
            </Anns>
            <Content>

\end{document}
</Content>
        </NarrPara>
    </ZSect>
</Spec>

