<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Spec Version="2.0" xsi:schemaLocation="http://czt.sourceforge.net/zml http://czt.sourceforge.net/zml/Z_2_0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://czt.sourceforge.net/zml">
    <NarrSect>
        <Anns>
            <LocAnn Col="0" Length="2114" Line="0" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="0"/>
        </Anns>
        <Content>\documentclass{article}

\usepackage{vmargin}
\usepackage{circus}

\setpapersize{A4}
\setmarginsrb{40mm}{20mm}{40mm}{20mm}{12pt}{11mm}{0pt}{10mm}

\begin{document}

\title{\Circus\ Grammar Explained --- Channels}
\author{Leonardo Freitas}
\date{March 2006}

\maketitle

\begin{abstract}
    \noindent This article documents the various ways one can declare \Circus\ channels and channel sets
    using \LaTeX\ markup.  It also documents the open issues of the language related to these two syntactic
    categories.
\end{abstract}

\section{Introduction}

In this file, we explain the various aspect of \Circus\ related to channel
declarations. At each section relevant to the grammar, we include its
corresponding CUP rule, as ``Section name --- \texttt{grammarRule}''.

\Circus\ productions must be included within the \textsf{circus} \LaTeX\
environment in order to be recognised by the parser. Therefore, to use \Circus\
one needs to have the current version of the \textsf{circus.sty} \LaTeX\ style
file.

Amongst other commands, it contains all \Circus\ keywords, and some useful
environments.


\section{\Circus\ channel paragraphs --- \grammar{channelPara}}

In \Circus\ channels are global paragraphs at section level. Other global
paragraphs are channel sets, processes, and all other Z paragraphs. Firstly, we
need to create a new section containing the \textsf{circus\_toolkit} as a
parent.

</Content>
    </NarrSect>
    <ZSect>
        <Anns>
            <LocAnn Col="0" Length="20837" Line="57" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="2114"/>
        </Anns>
        <Name>circus_channels</Name>
        <Parent>
            <Anns>
                <LocAnn Col="39" Length="15" Line="58" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="2171"/>
            </Anns>
            <Word>circus_toolkit</Word>
        </Parent>
        <ZParaList>
            <LatexMarkupPara/>
            <NarrPara>
                <Anns>
                    <LocAnn Col="14" Length="1086" Line="59" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="2202"/>
                </Anns>
                <Content>
\begin{verbatim}
   begin{zsection}
      \SECTION\ circus\_channels \parents\ circus\_toolkit
   end{zsection}
\end{verbatim}
We include with each typeset text the corresponded \LaTeX\ code.


\subsection{Common channels --- \grammar{channelDecl}}

Channels are declared in \Circus\ to specify synchronisation points. Channel
types are any Z expression, and they define the communication patterns to
synchronise.

Untyped channels are also allowed. They represent synchronisation points with
the given type $Synch$. Thus, declaring a untyped channel has the same effect
as declaring the channel with type $Synch$, as defined in the
\textsf{circus\_toolkit.tex} file.

Channels are declared within the \textsf{circus} \LaTeX\ environment, which are
typeset as Z unboxed items like in the \textsf{zed} \LaTeX\ environment. As the
Z standard, various unboxed \Circus\ items can be declared within the same
environment, as long as they are separated by a \grammar{NL} (new-line) token.

\subsubsection{Typed channels}

Let us define some typed channels,
</Content>
            </NarrPara>
            <ns1:ChannelPara xmlns:ns1="http://czt.sourceforge.net/circus">
                <Anns>
                    <LocAnn Col="0" Length="56" Line="90" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="3291"/>
                </Anns>
                <ZDeclList>
                    <ns1:ChannelDecl>
                        <Anns>
                            <LocAnn Col="16" Length="10" Line="91" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="3323"/>
                        </Anns>
                        <ZDeclNameList/>
                        <ZDeclNameList>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="16" Length="1" Line="91" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="3323"/>
                                </Anns>
                                <Word>a</Word>
                                <ZStrokeList/>
                            </ZDeclName>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="19" Length="1" Line="91" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="3326"/>
                                </Anns>
                                <Word>b</Word>
                                <ZStrokeList/>
                            </ZDeclName>
                        </ZDeclNameList>
                        <RefExpr Explicit="false" Mixfix="false">
                            <Anns>
                                <LocAnn Col="22" Length="4" Line="91" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="3329"/>
                            </Anns>
                            <ZRefName>
                                <Anns>
                                    <LocAnn Col="22" Length="4" Line="91" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="3329"/>
                                </Anns>
                                <Word>?</Word>
                                <ZStrokeList/>
                            </ZRefName>
                            <ZExprList/>
                        </RefExpr>
                    </ns1:ChannelDecl>
                </ZDeclList>
            </ns1:ChannelPara>
            <NarrPara>
                <Anns>
                    <LocAnn Col="0" Length="151" Line="94" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="3353"/>
                </Anns>
                <Content>\begin{verbatim}
     begin{circus}
        \circchannel\ a, b: \nat
     end{circus}\end{verbatim}
as well as typed channels with strokes.
</Content>
            </NarrPara>
            <ns2:ChannelPara xmlns:ns2="http://czt.sourceforge.net/circus">
                <Anns>
                    <LocAnn Col="0" Length="69" Line="102" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="3507"/>
                </Anns>
                <ZDeclList>
                    <ns2:ChannelDecl>
                        <Anns>
                            <LocAnn Col="16" Length="23" Line="103" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="3539"/>
                        </Anns>
                        <ZDeclNameList/>
                        <ZDeclNameList>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="16" Length="3" Line="103" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="3539"/>
                                </Anns>
                                <Word>x</Word>
                                <ZStrokeList>
                                    <NumStroke Digit="1"/>
                                </ZStrokeList>
                            </ZDeclName>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="22" Length="1" Line="103" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="3545"/>
                                </Anns>
                                <Word>r</Word>
                                <ZStrokeList/>
                            </ZDeclName>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="25" Length="2" Line="103" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="3548"/>
                                </Anns>
                                <Word>q</Word>
                                <ZStrokeList>
                                    <NextStroke/>
                                </ZStrokeList>
                            </ZDeclName>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="30" Length="3" Line="103" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="3553"/>
                                </Anns>
                                <Word>y</Word>
                                <ZStrokeList>
                                    <NumStroke Digit="2"/>
                                </ZStrokeList>
                            </ZDeclName>
                        </ZDeclNameList>
                        <RefExpr Explicit="false" Mixfix="false">
                            <Anns>
                                <LocAnn Col="35" Length="4" Line="103" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="3558"/>
                            </Anns>
                            <ZRefName>
                                <Anns>
                                    <LocAnn Col="35" Length="4" Line="103" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="3558"/>
                                </Anns>
                                <Word>?</Word>
                                <ZStrokeList/>
                            </ZRefName>
                            <ZExprList/>
                        </RefExpr>
                    </ns2:ChannelDecl>
                </ZDeclList>
            </ns2:ChannelPara>
            <NarrPara>
                <Anns>
                    <LocAnn Col="0" Length="716" Line="106" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="3582"/>
                </Anns>
                <Content>\begin{verbatim}
     begin{circus}
        \circchannel\ x_1~, r, q'~, y_2: \num
     end{circus}\end{verbatim}
Note that due to the Z standard idiosyncrasy regarding name lists with strokes
and commas (\textit{i.e.}, \grammar{DECORWORD} or \grammar{DECLWORD} in CZT),
we \textbf{*must*} include a hard space to separate these names (see Z Standard
section 7.3). This is needed, for instance, to allow distinction between set
extensions and a list of variable names in a declaration. The soft space
through \verb'\ ' is optional, though.

\subsubsection{Generic channels}

Generic channels can also be declared, where generic formal parameters given
are right after the $\circchannel$ keyword.
</Content>
            </NarrPara>
            <ns3:ChannelPara xmlns:ns3="http://czt.sourceforge.net/circus">
                <Anns>
                    <LocAnn Col="0" Length="77" Line="124" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="4301"/>
                </Anns>
                <ZDeclList>
                    <ns3:ChannelDecl>
                        <Anns>
                            <LocAnn Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex"/>
                        </Anns>
                        <ZDeclNameList>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="18" Length="1" Line="125" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="4335"/>
                                </Anns>
                                <Word>X</Word>
                                <ZStrokeList/>
                            </ZDeclName>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="21" Length="1" Line="125" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="4338"/>
                                </Anns>
                                <Word>Y</Word>
                                <ZStrokeList/>
                            </ZDeclName>
                        </ZDeclNameList>
                        <ZDeclNameList>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="25" Length="1" Line="125" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="4342"/>
                                </Anns>
                                <Word>g</Word>
                                <ZStrokeList/>
                            </ZDeclName>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="28" Length="3" Line="125" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="4345"/>
                                </Anns>
                                <Word>h</Word>
                                <ZStrokeList>
                                    <NumStroke Digit="1"/>
                                </ZStrokeList>
                            </ZDeclName>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="34" Length="1" Line="125" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="4351"/>
                                </Anns>
                                <Word>i</Word>
                                <ZStrokeList/>
                            </ZDeclName>
                        </ZDeclNameList>
                        <RefExpr Explicit="true" Mixfix="true">
                            <Anns>
                                <LocAnn Col="40" Length="8" Line="125" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="4355"/>
                                <ParenAnn>
                                    <Anns>
                                        <LocAnn Col="37" Length="10" Line="125" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="4354"/>
                                    </Anns>
                                </ParenAnn>
                            </Anns>
                            <ZRefName>
                                <Anns>
                                    <LocAnn Col="40" Length="4" Line="125" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="4357"/>
                                </Anns>
                                <Word> _ ? _ </Word>
                                <ZStrokeList/>
                            </ZRefName>
                            <ZExprList>
                                <RefExpr Explicit="false" Mixfix="false">
                                    <Anns>
                                        <LocAnn Col="38" Length="1" Line="125" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="4355"/>
                                    </Anns>
                                    <ZRefName>
                                        <Anns>
                                            <LocAnn Col="38" Length="1" Line="125" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="4355"/>
                                        </Anns>
                                        <Word>X</Word>
                                        <ZStrokeList/>
                                    </ZRefName>
                                    <ZExprList/>
                                </RefExpr>
                                <RefExpr Explicit="false" Mixfix="false">
                                    <Anns>
                                        <LocAnn Col="45" Length="1" Line="125" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="4362"/>
                                    </Anns>
                                    <ZRefName>
                                        <Anns>
                                            <LocAnn Col="45" Length="1" Line="125" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="4362"/>
                                        </Anns>
                                        <Word>Y</Word>
                                        <ZStrokeList/>
                                    </ZRefName>
                                    <ZExprList/>
                                </RefExpr>
                            </ZExprList>
                        </RefExpr>
                    </ns3:ChannelDecl>
                </ZDeclList>
            </ns3:ChannelPara>
            <NarrPara>
                <Anns>
                    <LocAnn Col="0" Length="1825" Line="128" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="4384"/>
                </Anns>
                <Content>\begin{verbatim}
     begin{circus}
        \circchannel\ [X, Y]\ g, h_1~, i: (X \rel Y)
     end{circus}\end{verbatim}
As before, names with decorations must have hard spaces before hitting a
\texttt{COMMA} token, as shown above.


\subsubsection{Synchronisation channels}

Synchronisation channels are defined without a type expression. The parser
introduces a $Synch$ \code{RefExpr} for it automatically, as it is necessary
for translation to and from ZML. This name is defined as a given set in the
\textsf{circus\_toolkit.tex} file.
</Content>
            </NarrPara>
            <ns4:ChannelPara xmlns:ns4="http://czt.sourceforge.net/circus">
                <Anns>
                    <LocAnn Col="3" Line="179" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="6231"/>
                </Anns>
                <ZDeclList>
                    <ns4:ChannelDecl>
                        <Anns>
                            <LocAnn Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex"/>
                        </Anns>
                        <ZDeclNameList/>
                        <ZDeclNameList>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="17" Length="1" Line="179" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="6245"/>
                                </Anns>
                                <Word>c</Word>
                                <ZStrokeList/>
                            </ZDeclName>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="20" Length="1" Line="179" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="6248"/>
                                </Anns>
                                <Word>d</Word>
                                <ZStrokeList/>
                            </ZDeclName>
                        </ZDeclNameList>
                    </ns4:ChannelDecl>
                </ZDeclList>
            </ns4:ChannelPara>
            <ns5:ChannelPara xmlns:ns5="http://czt.sourceforge.net/circus">
                <Anns>
                    <LocAnn Col="3" Line="180" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="6257"/>
                </Anns>
                <ZDeclList>
                    <ns5:ChannelDecl>
                        <Anns>
                            <LocAnn Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex"/>
                        </Anns>
                        <ZDeclNameList/>
                        <ZDeclNameList>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="17" Length="3" Line="180" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="6271"/>
                                </Anns>
                                <Word>z</Word>
                                <ZStrokeList>
                                    <NumStroke Digit="2"/>
                                </ZStrokeList>
                            </ZDeclName>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="23" Length="3" Line="180" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="6277"/>
                                </Anns>
                                <Word>w</Word>
                                <ZStrokeList>
                                    <NumStroke Digit="3"/>
                                </ZStrokeList>
                            </ZDeclName>
                        </ZDeclNameList>
                    </ns5:ChannelDecl>
                </ZDeclList>
            </ns5:ChannelPara>
            <NarrPara>
                <Anns>
                    <LocAnn Col="0" Length="1026" Line="183" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="6300"/>
                </Anns>
                <Content>\begin{verbatim}
     begin{circus}
        \circchannel\ c, d \\
        \circchannel\ z_2~, w_3
     end{circus}\end{verbatim}
This time, we left two declarations within the same Z box, but separated by a
\grammar{NL} (new-line) token.


\subsection{Channels through schemas --- \grammar{channelFromDecl}}

Another way of declaring typed channels is through schema references. Let us
define a schema named $S$ with two channels $a$ and $b$
</Content>
            </NarrPara>
            <AxPara Box="SchBox">
                <Anns>
                    <LocAnn Col="0" Length="79" Line="210" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7329"/>
                </Anns>
                <ZDeclNameList/>
                <ZSchText>
                    <ZDeclList>
                        <ConstDecl>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="15" Length="1" Line="210" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7344"/>
                                </Anns>
                                <Word>S</Word>
                                <ZStrokeList/>
                            </ZDeclName>
                            <SchExpr>
                                <ZSchText>
                                    <ZDeclList>
                                        <VarDecl>
                                            <Anns>
                                                <LocAnn Col="7" Length="10" Line="211" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7351"/>
                                            </Anns>
                                            <ZDeclNameList>
                                                <ZDeclName>
                                                    <Anns>
                                                        <LocAnn Col="3" Length="1" Line="211" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7351"/>
                                                    </Anns>
                                                    <Word>a</Word>
                                                    <ZStrokeList/>
                                                </ZDeclName>
                                                <ZDeclName>
                                                    <Anns>
                                                        <LocAnn Col="6" Length="1" Line="211" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7354"/>
                                                    </Anns>
                                                    <Word>b</Word>
                                                    <ZStrokeList/>
                                                </ZDeclName>
                                            </ZDeclNameList>
                                            <RefExpr Explicit="false" Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="9" Length="4" Line="211" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7357"/>
                                                </Anns>
                                                <ZRefName>
                                                    <Anns>
                                                        <LocAnn Col="9" Length="4" Line="211" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7357"/>
                                                    </Anns>
                                                    <Word>?</Word>
                                                    <ZStrokeList/>
                                                </ZRefName>
                                                <ZExprList/>
                                            </RefExpr>
                                        </VarDecl>
                                    </ZDeclList>
                                    <AndPred And="Wedge">
                                        <Anns>
                                            <LocAnn Col="9" Length="20" Line="213" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7374"/>
                                        </Anns>
                                        <MemPred Mixfix="true">
                                            <Anns>
                                                <LocAnn Col="3" Length="5" Line="213" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7374"/>
                                            </Anns>
                                            <TupleExpr>
                                                <ZExprList>
                                                    <RefExpr Explicit="false" Mixfix="false">
                                                        <Anns>
                                                            <LocAnn Col="3" Length="1" Line="213" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7374"/>
                                                        </Anns>
                                                        <ZRefName>
                                                            <Anns>
                                                                <LocAnn Col="3" Length="1" Line="213" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7374"/>
                                                            </Anns>
                                                            <Word>a</Word>
                                                            <ZStrokeList/>
                                                        </ZRefName>
                                                        <ZExprList/>
                                                    </RefExpr>
                                                    <RefExpr Explicit="false" Mixfix="false">
                                                        <Anns>
                                                            <LocAnn Col="7" Length="1" Line="213" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7378"/>
                                                        </Anns>
                                                        <ZRefName>
                                                            <Anns>
                                                                <LocAnn Col="7" Length="1" Line="213" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7378"/>
                                                            </Anns>
                                                            <Word>b</Word>
                                                            <ZStrokeList/>
                                                        </ZRefName>
                                                        <ZExprList/>
                                                    </RefExpr>
                                                </ZExprList>
                                            </TupleExpr>
                                            <RefExpr Explicit="false" Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="5" Length="2" Line="213" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7376"/>
                                                </Anns>
                                                <ZRefName>
                                                    <Anns>
                                                        <LocAnn Col="5" Length="2" Line="213" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7376"/>
                                                    </Anns>
                                                    <Word> _ &gt; _ </Word>
                                                    <ZStrokeList/>
                                                </ZRefName>
                                                <ZExprList/>
                                            </RefExpr>
                                        </MemPred>
                                        <MemPred Mixfix="true">
                                            <Anns>
                                                <LocAnn Col="15" Length="8" Line="213" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7386"/>
                                            </Anns>
                                            <TupleExpr>
                                                <ZExprList>
                                                    <RefExpr Explicit="false" Mixfix="false">
                                                        <Anns>
                                                            <LocAnn Col="15" Length="1" Line="213" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7386"/>
                                                        </Anns>
                                                        <ZRefName>
                                                            <Anns>
                                                                <LocAnn Col="15" Length="1" Line="213" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7386"/>
                                                            </Anns>
                                                            <Word>b</Word>
                                                            <ZStrokeList/>
                                                        </ZRefName>
                                                        <ZExprList/>
                                                    </RefExpr>
                                                    <NumExpr>
                                                        <Anns>
                                                            <LocAnn Col="22" Length="1" Line="213" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7393"/>
                                                        </Anns>
                                                        <ZNumeral Value="0">
                                                            <Anns>
                                                                <LocAnn Col="22" Length="1" Line="213" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7393"/>
                                                            </Anns>
                                                        </ZNumeral>
                                                    </NumExpr>
                                                </ZExprList>
                                            </TupleExpr>
                                            <RefExpr Explicit="false" Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="17" Length="4" Line="213" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7388"/>
                                                </Anns>
                                                <ZRefName>
                                                    <Anns>
                                                        <LocAnn Col="17" Length="4" Line="213" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7388"/>
                                                    </Anns>
                                                    <Word> _ ? _ </Word>
                                                    <ZStrokeList/>
                                                </ZRefName>
                                                <ZExprList/>
                                            </RefExpr>
                                        </MemPred>
                                    </AndPred>
                                </ZSchText>
                            </SchExpr>
                        </ConstDecl>
                    </ZDeclList>
                </ZSchText>
            </AxPara>
            <NarrPara>
                <Anns>
                    <LocAnn Col="12" Length="270" Line="214" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7408"/>
                </Anns>
                <Content>
\begin{verbatim}
     begin{schema}{S}
         a, b: \nat
     \where
         a &gt; b \land b \neq 0
     end{schema}
\end{verbatim}
With the $\circchannelfrom$ keyword, we can declare these channels in various
ways, depending on the chosen decoration.
</Content>
            </NarrPara>
            <ns6:ChannelPara xmlns:ns6="http://czt.sourceforge.net/circus">
                <Anns>
                    <LocAnn Col="3" Line="228" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7700"/>
                </Anns>
                <ZDeclList>
                    <ns6:ChannelDecl>
                        <Anns>
                            <LocAnn Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex"/>
                        </Anns>
                        <ZDeclNameList/>
                        <ZDeclNameList/>
                        <RefExpr Explicit="false" Mixfix="false">
                            <ZRefName>
                                <Anns>
                                    <LocAnn Col="21" Length="1" Line="228" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7718"/>
                                </Anns>
                                <Word>S</Word>
                                <ZStrokeList/>
                            </ZRefName>
                            <ZExprList/>
                        </RefExpr>
                    </ns6:ChannelDecl>
                </ZDeclList>
            </ns6:ChannelPara>
            <ns7:ChannelPara xmlns:ns7="http://czt.sourceforge.net/circus">
                <Anns>
                    <LocAnn Col="3" Line="229" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7727"/>
                </Anns>
                <ZDeclList>
                    <ns7:ChannelDecl>
                        <Anns>
                            <LocAnn Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex"/>
                        </Anns>
                        <ZDeclNameList/>
                        <ZDeclNameList/>
                        <RefExpr Explicit="false" Mixfix="false">
                            <ZRefName>
                                <Anns>
                                    <LocAnn Col="21" Length="3" Line="229" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7745"/>
                                </Anns>
                                <Word>S</Word>
                                <ZStrokeList>
                                    <NumStroke Digit="1"/>
                                </ZStrokeList>
                            </ZRefName>
                            <ZExprList/>
                        </RefExpr>
                    </ns7:ChannelDecl>
                </ZDeclList>
            </ns7:ChannelPara>
            <NarrPara>
                <Anns>
                    <LocAnn Col="0" Length="922" Line="232" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="7768"/>
                </Anns>
                <Content>\begin{verbatim}
     begin{circus}
        \circchannelfrom\ S \\
        \circchannelfrom\ S_1
     end{circus}\end{verbatim}
These declarations include four channels of type $\nat$, namely:~$a$, $b$,
$a_1$, and $b_1$.



Another option is to have schemas with generic types.
</Content>
            </NarrPara>
            <AxPara Box="SchBox">
                <Anns>
                    <LocAnn Col="0" Length="79" Line="265" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="8693"/>
                </Anns>
                <ZDeclNameList>
                    <ZDeclName>
                        <Anns>
                            <LocAnn Col="18" Length="1" Line="265" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="8711"/>
                        </Anns>
                        <Word>X</Word>
                        <ZStrokeList/>
                    </ZDeclName>
                </ZDeclNameList>
                <ZSchText>
                    <ZDeclList>
                        <ConstDecl>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="15" Length="1" Line="265" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="8708"/>
                                </Anns>
                                <Word>T</Word>
                                <ZStrokeList/>
                            </ZDeclName>
                            <SchExpr>
                                <ZSchText>
                                    <ZDeclList>
                                        <VarDecl>
                                            <Anns>
                                                <LocAnn Col="7" Length="14" Line="266" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="8718"/>
                                            </Anns>
                                            <ZDeclNameList>
                                                <ZDeclName>
                                                    <Anns>
                                                        <LocAnn Col="3" Length="1" Line="266" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="8718"/>
                                                    </Anns>
                                                    <Word>x</Word>
                                                    <ZStrokeList/>
                                                </ZDeclName>
                                                <ZDeclName>
                                                    <Anns>
                                                        <LocAnn Col="6" Length="1" Line="266" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="8721"/>
                                                    </Anns>
                                                    <Word>y</Word>
                                                    <ZStrokeList/>
                                                </ZDeclName>
                                            </ZDeclNameList>
                                            <PowerExpr>
                                                <Anns>
                                                    <LocAnn Col="9" Length="8" Line="266" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="8724"/>
                                                </Anns>
                                                <RefExpr Explicit="false" Mixfix="false">
                                                    <Anns>
                                                        <LocAnn Col="16" Length="1" Line="266" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="8731"/>
                                                    </Anns>
                                                    <ZRefName>
                                                        <Anns>
                                                            <LocAnn Col="16" Length="1" Line="266" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="8731"/>
                                                        </Anns>
                                                        <Word>X</Word>
                                                        <ZStrokeList/>
                                                    </ZRefName>
                                                    <ZExprList/>
                                                </RefExpr>
                                            </PowerExpr>
                                        </VarDecl>
                                    </ZDeclList>
                                    <MemPred Mixfix="true">
                                        <Anns>
                                            <LocAnn Col="3" Length="13" Line="268" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="8745"/>
                                        </Anns>
                                        <TupleExpr>
                                            <ZExprList>
                                                <RefExpr Explicit="false" Mixfix="false">
                                                    <Anns>
                                                        <LocAnn Col="3" Length="1" Line="268" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="8745"/>
                                                    </Anns>
                                                    <ZRefName>
                                                        <Anns>
                                                            <LocAnn Col="3" Length="1" Line="268" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="8745"/>
                                                        </Anns>
                                                        <Word>x</Word>
                                                        <ZStrokeList/>
                                                    </ZRefName>
                                                    <ZExprList/>
                                                </RefExpr>
                                                <RefExpr Explicit="false" Mixfix="false">
                                                    <Anns>
                                                        <LocAnn Col="15" Length="1" Line="268" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="8757"/>
                                                    </Anns>
                                                    <ZRefName>
                                                        <Anns>
                                                            <LocAnn Col="15" Length="1" Line="268" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="8757"/>
                                                        </Anns>
                                                        <Word>y</Word>
                                                        <ZStrokeList/>
                                                    </ZRefName>
                                                    <ZExprList/>
                                                </RefExpr>
                                            </ZExprList>
                                        </TupleExpr>
                                        <RefExpr Explicit="false" Mixfix="false">
                                            <Anns>
                                                <LocAnn Col="5" Length="9" Line="268" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="8747"/>
                                            </Anns>
                                            <ZRefName>
                                                <Anns>
                                                    <LocAnn Col="5" Length="9" Line="268" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="8747"/>
                                                </Anns>
                                                <Word> _ ? _ </Word>
                                                <ZStrokeList/>
                                            </ZRefName>
                                            <ZExprList/>
                                        </RefExpr>
                                    </MemPred>
                                </ZSchText>
                            </SchExpr>
                        </ConstDecl>
                    </ZDeclList>
                </ZSchText>
            </AxPara>
            <NarrPara>
                <Anns>
                    <LocAnn Col="12" Length="562" Line="269" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="8772"/>
                </Anns>
                <Content>
\begin{verbatim}
     begin{schema}{T}[X]
         x, y: \power~X
     \where
         x \subseteq y
     end{schema}
\end{verbatim}
In this case, one can define the channels from the schema via
either:~(i)~declaring the schema name with corresponding number of generic
actuals;~(ii)~leaving the original generic formal parameters (possibly renaming
them);~(iii)~letting the typechecker decide;~or (iii)~redefining the generic
formal parameters of channel types in terms of a new pattern of formal
parameters for the schema generic actuals.
</Content>
            </NarrPara>
            <ns8:ChannelPara xmlns:ns8="http://czt.sourceforge.net/circus">
                <Anns>
                    <LocAnn Col="4" Line="287" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9357"/>
                </Anns>
                <ZDeclList>
                    <ns8:ChannelDecl>
                        <Anns>
                            <LocAnn Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex"/>
                        </Anns>
                        <ZDeclNameList/>
                        <ZDeclNameList/>
                        <RefExpr Explicit="true" Mixfix="false">
                            <ZRefName>
                                <Anns>
                                    <LocAnn Col="22" Length="1" Line="287" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9375"/>
                                </Anns>
                                <Word>T</Word>
                                <ZStrokeList/>
                            </ZRefName>
                            <ZExprList>
                                <Anns>
                                    <LocAnn Col="23" Length="6" Line="287" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9376"/>
                                </Anns>
                                <RefExpr Explicit="false" Mixfix="false">
                                    <Anns>
                                        <LocAnn Col="24" Length="4" Line="287" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9377"/>
                                    </Anns>
                                    <ZRefName>
                                        <Anns>
                                            <LocAnn Col="24" Length="4" Line="287" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9377"/>
                                        </Anns>
                                        <Word>?</Word>
                                        <ZStrokeList/>
                                    </ZRefName>
                                    <ZExprList/>
                                </RefExpr>
                            </ZExprList>
                        </RefExpr>
                    </ns8:ChannelDecl>
                </ZDeclList>
            </ns8:ChannelPara>
            <ns9:ChannelPara xmlns:ns9="http://czt.sourceforge.net/circus">
                <Anns>
                    <LocAnn Col="4" Line="288" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9391"/>
                </Anns>
                <ZDeclList>
                    <ns9:ChannelDecl>
                        <Anns>
                            <LocAnn Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex"/>
                        </Anns>
                        <ZDeclNameList>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="23" Length="1" Line="288" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9410"/>
                                </Anns>
                                <Word>Y</Word>
                                <ZStrokeList/>
                            </ZDeclName>
                        </ZDeclNameList>
                        <ZDeclNameList/>
                        <RefExpr Explicit="true" Mixfix="false">
                            <ZRefName>
                                <Anns>
                                    <LocAnn Col="27" Length="3" Line="288" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9414"/>
                                </Anns>
                                <Word>T</Word>
                                <ZStrokeList>
                                    <NumStroke Digit="1"/>
                                </ZStrokeList>
                            </ZRefName>
                            <ZExprList>
                                <Anns>
                                    <LocAnn Col="30" Length="3" Line="288" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9417"/>
                                </Anns>
                                <RefExpr Explicit="false" Mixfix="false">
                                    <Anns>
                                        <LocAnn Col="31" Length="1" Line="288" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9418"/>
                                    </Anns>
                                    <ZRefName>
                                        <Anns>
                                            <LocAnn Col="31" Length="1" Line="288" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9418"/>
                                        </Anns>
                                        <Word>Y</Word>
                                        <ZStrokeList/>
                                    </ZRefName>
                                    <ZExprList/>
                                </RefExpr>
                            </ZExprList>
                        </RefExpr>
                    </ns9:ChannelDecl>
                </ZDeclList>
            </ns9:ChannelPara>
            <ns10:ChannelPara xmlns:ns10="http://czt.sourceforge.net/circus">
                <Anns>
                    <LocAnn Col="4" Line="289" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9429"/>
                </Anns>
                <ZDeclList>
                    <ns10:ChannelDecl>
                        <Anns>
                            <LocAnn Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex"/>
                        </Anns>
                        <ZDeclNameList/>
                        <ZDeclNameList/>
                        <RefExpr Explicit="false" Mixfix="false">
                            <ZRefName>
                                <Anns>
                                    <LocAnn Col="22" Length="3" Line="289" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9447"/>
                                </Anns>
                                <Word>T</Word>
                                <ZStrokeList>
                                    <NumStroke Digit="2"/>
                                </ZStrokeList>
                            </ZRefName>
                            <ZExprList/>
                        </RefExpr>
                    </ns10:ChannelDecl>
                </ZDeclList>
            </ns10:ChannelPara>
            <ns11:ChannelPara xmlns:ns11="http://czt.sourceforge.net/circus">
                <Anns>
                    <LocAnn Col="4" Line="290" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9500"/>
                </Anns>
                <ZDeclList>
                    <ns11:ChannelDecl>
                        <Anns>
                            <LocAnn Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex"/>
                        </Anns>
                        <ZDeclNameList>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="23" Length="1" Line="290" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9519"/>
                                </Anns>
                                <Word>A</Word>
                                <ZStrokeList/>
                            </ZDeclName>
                            <ZDeclName>
                                <Anns>
                                    <LocAnn Col="26" Length="1" Line="290" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9522"/>
                                </Anns>
                                <Word>B</Word>
                                <ZStrokeList/>
                            </ZDeclName>
                        </ZDeclNameList>
                        <ZDeclNameList/>
                        <RefExpr Explicit="true" Mixfix="false">
                            <ZRefName>
                                <Anns>
                                    <LocAnn Col="30" Length="3" Line="290" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9526"/>
                                </Anns>
                                <Word>T</Word>
                                <ZStrokeList>
                                    <NumStroke Digit="3"/>
                                </ZStrokeList>
                            </ZRefName>
                            <ZExprList>
                                <Anns>
                                    <LocAnn Col="33" Length="12" Line="290" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9529"/>
                                </Anns>
                                <ProdExpr>
                                    <Anns>
                                        <LocAnn Col="43" Length="10" Line="290" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9530"/>
                                    </Anns>
                                    <ZExprList>
                                        <RefExpr Explicit="false" Mixfix="false">
                                            <Anns>
                                                <LocAnn Col="34" Length="1" Line="290" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9530"/>
                                            </Anns>
                                            <ZRefName>
                                                <Anns>
                                                    <LocAnn Col="34" Length="1" Line="290" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9530"/>
                                                </Anns>
                                                <Word>A</Word>
                                                <ZStrokeList/>
                                            </ZRefName>
                                            <ZExprList/>
                                        </RefExpr>
                                        <RefExpr Explicit="false" Mixfix="false">
                                            <Anns>
                                                <LocAnn Col="43" Length="1" Line="290" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9539"/>
                                            </Anns>
                                            <ZRefName>
                                                <Anns>
                                                    <LocAnn Col="43" Length="1" Line="290" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9539"/>
                                                </Anns>
                                                <Word>B</Word>
                                                <ZStrokeList/>
                                            </ZRefName>
                                            <ZExprList/>
                                        </RefExpr>
                                    </ZExprList>
                                </ProdExpr>
                            </ZExprList>
                        </RefExpr>
                    </ns11:ChannelDecl>
                </ZDeclList>
            </ns11:ChannelPara>
            <NarrPara>
                <Anns>
                    <LocAnn Col="0" Length="2168" Line="293" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="9561"/>
                </Anns>
                <Content>\begin{verbatim}
     begin{circus}
         \circchannelfrom\ T[\nat] \\
         \circchannelfrom\ [Y]\ T_1[Y] \\
         \circchannelfrom\ T_2 \\
         \circchannelfrom\ [A, B]\ T_3[A \cross B]
     end{circus}\end{verbatim}
It is the task of the typechecker to guarantee that either the instantiation or
(re)definitions are type-correct. For each case we would have:
\begin{itemize}
    \item[i] $\circchannel\ x, y: \power~\nat$
    \item[ii] $\circchannel\ [Y]\ x_1~, y_1: \power~Y$
    \item[iii] $\circchannel\ x_2~, y_2: \power~X$
    \item[iv] $\circchannel\ [A, B]\ x_3~, y_3: \power~(A \cross B)$
\end{itemize}
Thus, $\circchannelfrom$ is just syntactic sugar for a corresponding
$\circchannel$ declaration.


\section{\Circus\ channel set paragraphs --- \grammar{channelSetPara}}

Channel sets defines an expression to represent a particular set of channels.
They are normally used as reference names for other \Circus\ operators that
have channel references as parts of their AST, such as the parallel and the
hiding operators.

Channel sets are given as a name and a corresponding channel set expression.
</Content>
            </NarrPara>
            <ns12:ChannelSetPara xmlns:ns12="http://czt.sourceforge.net/circus">
                <Anns>
                    <LocAnn Col="4" Line="345" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11752"/>
                </Anns>
                <ZDeclNameList/>
                <ZDeclName>
                    <Anns>
                        <LocAnn Col="21" Length="1" Line="345" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11769"/>
                    </Anns>
                    <Word>C</Word>
                    <ZStrokeList/>
                </ZDeclName>
                <ns12:ChannelSet>
                    <Anns>
                        <LocAnn Col="26" Line="345" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex"/>
                    </Anns>
                    <ns12:BasicChannelSetExpr>
                        <ZExprList/>
                    </ns12:BasicChannelSetExpr>
                </ns12:ChannelSet>
            </ns12:ChannelSetPara>
            <ns13:ChannelSetPara xmlns:ns13="http://czt.sourceforge.net/circus">
                <Anns>
                    <LocAnn Col="4" Line="346" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11792"/>
                </Anns>
                <ZDeclNameList/>
                <ZDeclName>
                    <Anns>
                        <LocAnn Col="21" Length="2" Line="346" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11809"/>
                    </Anns>
                    <Word>C0</Word>
                    <ZStrokeList/>
                </ZDeclName>
                <ns13:ChannelSet>
                    <Anns>
                        <LocAnn Col="37" Line="346" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex"/>
                    </Anns>
                    <ns13:BasicChannelSetExpr>
                        <Anns>
                            <LocAnn Col="27" Length="19" Line="346" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11815"/>
                        </Anns>
                        <ZExprList/>
                    </ns13:BasicChannelSetExpr>
                </ns13:ChannelSet>
            </ns13:ChannelSetPara>
            <ns14:ChannelSetPara xmlns:ns14="http://czt.sourceforge.net/circus">
                <Anns>
                    <LocAnn Col="4" Line="347" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11843"/>
                </Anns>
                <ZDeclNameList/>
                <ZDeclName>
                    <Anns>
                        <LocAnn Col="21" Length="2" Line="347" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11860"/>
                    </Anns>
                    <Word>C1</Word>
                    <ZStrokeList/>
                </ZDeclName>
                <ns14:ChannelSet>
                    <Anns>
                        <LocAnn Col="48" Line="347" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex"/>
                    </Anns>
                    <ns14:BasicChannelSetExpr>
                        <Anns>
                            <LocAnn Col="27" Length="30" Line="347" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11866"/>
                        </Anns>
                        <ZExprList>
                            <RefExpr Explicit="false" Mixfix="false">
                                <Anns>
                                    <LocAnn Col="37" Length="1" Line="347" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11876"/>
                                </Anns>
                                <ZRefName>
                                    <Anns>
                                        <LocAnn Col="37" Length="1" Line="347" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11876"/>
                                    </Anns>
                                    <Word>a</Word>
                                    <ZStrokeList/>
                                </ZRefName>
                                <ZExprList/>
                            </RefExpr>
                            <RefExpr Explicit="false" Mixfix="false">
                                <Anns>
                                    <LocAnn Col="40" Length="1" Line="347" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11879"/>
                                </Anns>
                                <ZRefName>
                                    <Anns>
                                        <LocAnn Col="40" Length="1" Line="347" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11879"/>
                                    </Anns>
                                    <Word>b</Word>
                                    <ZStrokeList/>
                                </ZRefName>
                                <ZExprList/>
                            </RefExpr>
                            <RefExpr Explicit="false" Mixfix="false">
                                <Anns>
                                    <LocAnn Col="43" Length="1" Line="347" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11882"/>
                                </Anns>
                                <ZRefName>
                                    <Anns>
                                        <LocAnn Col="43" Length="1" Line="347" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11882"/>
                                    </Anns>
                                    <Word>c</Word>
                                    <ZStrokeList/>
                                </ZRefName>
                                <ZExprList/>
                            </RefExpr>
                            <RefExpr Explicit="false" Mixfix="false">
                                <Anns>
                                    <LocAnn Col="46" Length="1" Line="347" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11885"/>
                                </Anns>
                                <ZRefName>
                                    <Anns>
                                        <LocAnn Col="46" Length="1" Line="347" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11885"/>
                                    </Anns>
                                    <Word>d</Word>
                                    <ZStrokeList/>
                                </ZRefName>
                                <ZExprList/>
                            </RefExpr>
                        </ZExprList>
                    </ns14:BasicChannelSetExpr>
                </ns14:ChannelSet>
            </ns14:ChannelSetPara>
            <ns15:ChannelSetPara xmlns:ns15="http://czt.sourceforge.net/circus">
                <Anns>
                    <LocAnn Col="4" Line="348" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11905"/>
                </Anns>
                <ZDeclNameList/>
                <ZDeclName>
                    <Anns>
                        <LocAnn Col="21" Length="2" Line="348" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11922"/>
                    </Anns>
                    <Word>C2</Word>
                    <ZStrokeList/>
                </ZDeclName>
                <ns15:ChannelSet>
                    <Anns>
                        <LocAnn Col="53" Line="348" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex"/>
                    </Anns>
                    <ns15:BasicChannelSetExpr>
                        <Anns>
                            <LocAnn Col="27" Length="35" Line="348" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11928"/>
                        </Anns>
                        <ZExprList>
                            <RefExpr Explicit="false" Mixfix="false">
                                <Anns>
                                    <LocAnn Col="37" Length="1" Line="348" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11938"/>
                                </Anns>
                                <ZRefName>
                                    <Anns>
                                        <LocAnn Col="37" Length="1" Line="348" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11938"/>
                                    </Anns>
                                    <Word>x</Word>
                                    <ZStrokeList/>
                                </ZRefName>
                                <ZExprList/>
                            </RefExpr>
                            <RefExpr Explicit="false" Mixfix="false">
                                <Anns>
                                    <LocAnn Col="40" Length="1" Line="348" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11941"/>
                                </Anns>
                                <ZRefName>
                                    <Anns>
                                        <LocAnn Col="40" Length="1" Line="348" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11941"/>
                                    </Anns>
                                    <Word>y</Word>
                                    <ZStrokeList/>
                                </ZRefName>
                                <ZExprList/>
                            </RefExpr>
                            <RefExpr Explicit="false" Mixfix="false">
                                <Anns>
                                    <LocAnn Col="43" Length="3" Line="348" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11944"/>
                                </Anns>
                                <ZRefName>
                                    <Anns>
                                        <LocAnn Col="43" Length="3" Line="348" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11944"/>
                                    </Anns>
                                    <Word>x</Word>
                                    <ZStrokeList>
                                        <NumStroke Digit="1"/>
                                    </ZStrokeList>
                                </ZRefName>
                                <ZExprList/>
                            </RefExpr>
                            <RefExpr Explicit="false" Mixfix="false">
                                <Anns>
                                    <LocAnn Col="49" Length="3" Line="348" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11950"/>
                                </Anns>
                                <ZRefName>
                                    <Anns>
                                        <LocAnn Col="49" Length="3" Line="348" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11950"/>
                                    </Anns>
                                    <Word>y</Word>
                                    <ZStrokeList>
                                        <NumStroke Digit="1"/>
                                    </ZStrokeList>
                                </ZRefName>
                                <ZExprList/>
                            </RefExpr>
                        </ZExprList>
                    </ns15:BasicChannelSetExpr>
                </ns15:ChannelSet>
            </ns15:ChannelSetPara>
            <ns16:ChannelSetPara xmlns:ns16="http://czt.sourceforge.net/circus">
                <Anns>
                    <LocAnn Col="4" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11972"/>
                </Anns>
                <ZDeclNameList>
                    <ZDeclName>
                        <Anns>
                            <LocAnn Col="22" Length="1" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11990"/>
                        </Anns>
                        <Word>A</Word>
                        <ZStrokeList/>
                    </ZDeclName>
                    <ZDeclName>
                        <Anns>
                            <LocAnn Col="25" Length="1" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11993"/>
                        </Anns>
                        <Word>B</Word>
                        <ZStrokeList/>
                    </ZDeclName>
                </ZDeclNameList>
                <ZDeclName>
                    <Anns>
                        <LocAnn Col="28" Length="2" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="11996"/>
                    </Anns>
                    <Word>C3</Word>
                    <ZStrokeList/>
                </ZDeclName>
                <ns16:ChannelSet>
                    <Anns>
                        <LocAnn Col="92" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex"/>
                    </Anns>
                    <ns16:BasicChannelSetExpr>
                        <Anns>
                            <LocAnn Col="34" Length="67" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12002"/>
                        </Anns>
                        <ZExprList>
                            <RefExpr Explicit="true" Mixfix="false">
                                <Anns>
                                    <LocAnn Col="44" Length="15" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12012"/>
                                </Anns>
                                <ZRefName>
                                    <Anns>
                                        <LocAnn Col="44" Length="3" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12012"/>
                                    </Anns>
                                    <Word>x</Word>
                                    <ZStrokeList>
                                        <NumStroke Digit="2"/>
                                    </ZStrokeList>
                                </ZRefName>
                                <ZExprList>
                                    <ProdExpr>
                                        <Anns>
                                            <LocAnn Col="57" Length="10" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12016"/>
                                        </Anns>
                                        <ZExprList>
                                            <RefExpr Explicit="false" Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="48" Length="1" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12016"/>
                                                </Anns>
                                                <ZRefName>
                                                    <Anns>
                                                        <LocAnn Col="48" Length="1" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12016"/>
                                                    </Anns>
                                                    <Word>A</Word>
                                                    <ZStrokeList/>
                                                </ZRefName>
                                                <ZExprList/>
                                            </RefExpr>
                                            <RefExpr Explicit="false" Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="57" Length="1" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12025"/>
                                                </Anns>
                                                <ZRefName>
                                                    <Anns>
                                                        <LocAnn Col="57" Length="1" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12025"/>
                                                    </Anns>
                                                    <Word>B</Word>
                                                    <ZStrokeList/>
                                                </ZRefName>
                                                <ZExprList/>
                                            </RefExpr>
                                        </ZExprList>
                                    </ProdExpr>
                                </ZExprList>
                            </RefExpr>
                            <RefExpr Explicit="true" Mixfix="false">
                                <Anns>
                                    <LocAnn Col="62" Length="13" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12030"/>
                                </Anns>
                                <ZRefName>
                                    <Anns>
                                        <LocAnn Col="62" Length="3" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12030"/>
                                    </Anns>
                                    <Word>y</Word>
                                    <ZStrokeList>
                                        <NumStroke Digit="2"/>
                                    </ZStrokeList>
                                </ZRefName>
                                <ZExprList>
                                    <RefExpr Explicit="true" Mixfix="true">
                                        <Anns>
                                            <LocAnn Col="68" Length="8" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12034"/>
                                        </Anns>
                                        <ZRefName>
                                            <Anns>
                                                <LocAnn Col="68" Length="4" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12036"/>
                                            </Anns>
                                            <Word> _ ? _ </Word>
                                            <ZStrokeList/>
                                        </ZRefName>
                                        <ZExprList>
                                            <RefExpr Explicit="false" Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="66" Length="1" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12034"/>
                                                </Anns>
                                                <ZRefName>
                                                    <Anns>
                                                        <LocAnn Col="66" Length="1" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12034"/>
                                                    </Anns>
                                                    <Word>A</Word>
                                                    <ZStrokeList/>
                                                </ZRefName>
                                                <ZExprList/>
                                            </RefExpr>
                                            <RefExpr Explicit="false" Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="73" Length="1" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12041"/>
                                                </Anns>
                                                <ZRefName>
                                                    <Anns>
                                                        <LocAnn Col="73" Length="1" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12041"/>
                                                    </Anns>
                                                    <Word>B</Word>
                                                    <ZStrokeList/>
                                                </ZRefName>
                                                <ZExprList/>
                                            </RefExpr>
                                        </ZExprList>
                                    </RefExpr>
                                </ZExprList>
                            </RefExpr>
                            <RefExpr Explicit="true" Mixfix="false">
                                <Anns>
                                    <LocAnn Col="77" Length="6" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12045"/>
                                </Anns>
                                <ZRefName>
                                    <Anns>
                                        <LocAnn Col="77" Length="3" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12045"/>
                                    </Anns>
                                    <Word>x</Word>
                                    <ZStrokeList>
                                        <NumStroke Digit="1"/>
                                    </ZStrokeList>
                                </ZRefName>
                                <ZExprList>
                                    <RefExpr Explicit="false" Mixfix="false">
                                        <Anns>
                                            <LocAnn Col="81" Length="1" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12049"/>
                                        </Anns>
                                        <ZRefName>
                                            <Anns>
                                                <LocAnn Col="81" Length="1" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12049"/>
                                            </Anns>
                                            <Word>A</Word>
                                            <ZStrokeList/>
                                        </ZRefName>
                                        <ZExprList/>
                                    </RefExpr>
                                </ZExprList>
                            </RefExpr>
                            <RefExpr Explicit="true" Mixfix="false">
                                <Anns>
                                    <LocAnn Col="85" Length="6" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12053"/>
                                </Anns>
                                <ZRefName>
                                    <Anns>
                                        <LocAnn Col="85" Length="3" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12053"/>
                                    </Anns>
                                    <Word>y</Word>
                                    <ZStrokeList>
                                        <NumStroke Digit="1"/>
                                    </ZStrokeList>
                                </ZRefName>
                                <ZExprList>
                                    <RefExpr Explicit="false" Mixfix="false">
                                        <Anns>
                                            <LocAnn Col="89" Length="1" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12057"/>
                                        </Anns>
                                        <ZRefName>
                                            <Anns>
                                                <LocAnn Col="89" Length="1" Line="349" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12057"/>
                                            </Anns>
                                            <Word>B</Word>
                                            <ZStrokeList/>
                                        </ZRefName>
                                        <ZExprList/>
                                    </RefExpr>
                                </ZExprList>
                            </RefExpr>
                        </ZExprList>
                    </ns16:BasicChannelSetExpr>
                </ns16:ChannelSet>
            </ns16:ChannelSetPara>
            <ns17:ChannelSetPara xmlns:ns17="http://czt.sourceforge.net/circus">
                <Anns>
                    <LocAnn Col="4" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12078"/>
                </Anns>
                <ZDeclNameList/>
                <ZDeclName>
                    <Anns>
                        <LocAnn Col="21" Length="2" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12095"/>
                    </Anns>
                    <Word>C4</Word>
                    <ZStrokeList/>
                </ZDeclName>
                <ns17:ChannelSet>
                    <Anns>
                        <LocAnn Col="76" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex"/>
                    </Anns>
                    <ApplExpr Mixfix="true">
                        <Anns>
                            <LocAnn Col="48" Length="48" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12102"/>
                        </Anns>
                        <RefExpr Explicit="false" Mixfix="false">
                            <Anns>
                                <LocAnn Col="48" Length="9" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12122"/>
                            </Anns>
                            <ZRefName>
                                <Anns>
                                    <LocAnn Col="48" Length="9" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12122"/>
                                </Anns>
                                <Word> _ \ _ </Word>
                                <ZStrokeList/>
                            </ZRefName>
                            <ZExprList/>
                        </RefExpr>
                        <TupleExpr>
                            <ZExprList>
                                <ApplExpr Mixfix="true">
                                    <Anns>
                                        <ParenAnn/>
                                    </Anns>
                                    <RefExpr Explicit="false" Mixfix="false">
                                        <ZRefName>
                                            <Anns>
                                                <LocAnn Col="31" Length="4" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12105"/>
                                            </Anns>
                                            <Word> _ ? _ </Word>
                                            <ZStrokeList/>
                                        </ZRefName>
                                        <ZExprList/>
                                    </RefExpr>
                                    <TupleExpr>
                                        <ZExprList>
                                            <RefExpr Explicit="false" Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="28" Length="2" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12102"/>
                                                </Anns>
                                                <ZRefName>
                                                    <Anns>
                                                        <LocAnn Col="28" Length="2" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12102"/>
                                                    </Anns>
                                                    <Word>C1</Word>
                                                    <ZStrokeList/>
                                                </ZRefName>
                                                <ZExprList/>
                                            </RefExpr>
                                            <ApplExpr Mixfix="true">
                                                <RefExpr Explicit="false" Mixfix="false">
                                                    <ZRefName>
                                                        <Anns>
                                                            <LocAnn Col="39" Length="4" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12113"/>
                                                        </Anns>
                                                        <Word> _ ? _ </Word>
                                                        <ZStrokeList/>
                                                    </ZRefName>
                                                    <ZExprList/>
                                                </RefExpr>
                                                <TupleExpr>
                                                    <ZExprList>
                                                        <RefExpr Explicit="false" Mixfix="false">
                                                            <Anns>
                                                                <LocAnn Col="36" Length="2" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12110"/>
                                                            </Anns>
                                                            <ZRefName>
                                                                <Anns>
                                                                    <LocAnn Col="36" Length="2" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12110"/>
                                                                </Anns>
                                                                <Word>C2</Word>
                                                                <ZStrokeList/>
                                                            </ZRefName>
                                                            <ZExprList/>
                                                        </RefExpr>
                                                        <RefExpr Explicit="false" Mixfix="false">
                                                            <Anns>
                                                                <LocAnn Col="44" Length="2" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12118"/>
                                                            </Anns>
                                                            <ZRefName>
                                                                <Anns>
                                                                    <LocAnn Col="44" Length="2" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12118"/>
                                                                </Anns>
                                                                <Word>C3</Word>
                                                                <ZStrokeList/>
                                                            </ZRefName>
                                                            <ZExprList/>
                                                        </RefExpr>
                                                    </ZExprList>
                                                </TupleExpr>
                                            </ApplExpr>
                                        </ZExprList>
                                    </TupleExpr>
                                </ApplExpr>
                                <ApplExpr Mixfix="true">
                                    <Anns>
                                        <LocAnn Col="70" Length="17" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12133"/>
                                        <ParenAnn>
                                            <Anns>
                                                <LocAnn Col="58" Length="19" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12132"/>
                                            </Anns>
                                        </ParenAnn>
                                    </Anns>
                                    <RefExpr Explicit="false" Mixfix="false">
                                        <Anns>
                                            <LocAnn Col="70" Length="4" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12144"/>
                                        </Anns>
                                        <ZRefName>
                                            <Anns>
                                                <LocAnn Col="70" Length="4" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12144"/>
                                            </Anns>
                                            <Word> _ ? _ </Word>
                                            <ZStrokeList/>
                                        </ZRefName>
                                        <ZExprList/>
                                    </RefExpr>
                                    <TupleExpr>
                                        <ZExprList>
                                            <ApplExpr Mixfix="true">
                                                <Anns>
                                                    <LocAnn Col="62" Length="10" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12133"/>
                                                </Anns>
                                                <RefExpr Explicit="false" Mixfix="false">
                                                    <Anns>
                                                        <LocAnn Col="62" Length="4" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12136"/>
                                                    </Anns>
                                                    <ZRefName>
                                                        <Anns>
                                                            <LocAnn Col="62" Length="4" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12136"/>
                                                        </Anns>
                                                        <Word> _ ? _ </Word>
                                                        <ZStrokeList/>
                                                    </ZRefName>
                                                    <ZExprList/>
                                                </RefExpr>
                                                <TupleExpr>
                                                    <ZExprList>
                                                        <RefExpr Explicit="false" Mixfix="false">
                                                            <Anns>
                                                                <LocAnn Col="59" Length="2" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12133"/>
                                                            </Anns>
                                                            <ZRefName>
                                                                <Anns>
                                                                    <LocAnn Col="59" Length="2" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12133"/>
                                                                </Anns>
                                                                <Word>C0</Word>
                                                                <ZStrokeList/>
                                                            </ZRefName>
                                                            <ZExprList/>
                                                        </RefExpr>
                                                        <RefExpr Explicit="false" Mixfix="false">
                                                            <Anns>
                                                                <LocAnn Col="67" Length="2" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12141"/>
                                                            </Anns>
                                                            <ZRefName>
                                                                <Anns>
                                                                    <LocAnn Col="67" Length="2" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12141"/>
                                                                </Anns>
                                                                <Word>C1</Word>
                                                                <ZStrokeList/>
                                                            </ZRefName>
                                                            <ZExprList/>
                                                        </RefExpr>
                                                    </ZExprList>
                                                </TupleExpr>
                                            </ApplExpr>
                                            <RefExpr Explicit="false" Mixfix="false">
                                                <Anns>
                                                    <LocAnn Col="75" Length="1" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12149"/>
                                                </Anns>
                                                <ZRefName>
                                                    <Anns>
                                                        <LocAnn Col="75" Length="1" Line="350" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12149"/>
                                                    </Anns>
                                                    <Word>C</Word>
                                                    <ZStrokeList/>
                                                </ZRefName>
                                                <ZExprList/>
                                            </RefExpr>
                                        </ZExprList>
                                    </TupleExpr>
                                </ApplExpr>
                            </ZExprList>
                        </TupleExpr>
                    </ApplExpr>
                </ns17:ChannelSet>
            </ns17:ChannelSetPara>
            <NarrPara>
                <Anns>
                    <LocAnn Col="0" Length="10780" Line="353" Loc="C:\research\tools\java\sourceforge\czt\0.5.1\parser\tests\circus\channels.tex" Start="12171"/>
                </Anns>
                <Content>\begin{verbatim}
    begin{circus}
        \circchannelset\ C == \emptyset \\
        \circchannelset\ C0 == \lchanset \rchanset         \circchannelset\ C1 == \lchanset a, b, c, d \rchanset \\
        \circchannelset\ C2 == \lchanset x, y, x_1~, y_1 \rchanset \\
        \circchannelset\ [A, B] C3 == \lchanset x_2[A \cross B]~,
                                                y_2[A \fun B], x_1[A],
                                                y_1[B] \rchanset \\
        \circchannelset\ C4 == (C1 \cup C2 \cap C3) \setminus
                               (C0 \cup C1 \cup C)
    end{circus}
\end{verbatim}
The channel set expressions mostly used are: set union, intersection and
difference expressions;~set extension expressions;~reference expressions;~and
application expressions.

Considering \code{BasicChannelSetExpr} a special case of set extension (with special brackets),
the channel set expressions are a subset of the whole Z expression tree. More precisely, table~\ref{csexpr}
shows which one of the available Z expression productions are valid channel set expressions. On the third column
of the table table:~``\textbf{Y(N)}'' means the Z expression is (is not) valid;~``\textbf{Y*}'' means the Z expression
is valid provided one changes the normal ($\{~\}$) brackets to the special ($\lchanset~\rchanset$) channel set
brackets;~``\textbf{Y!}'' means an undecided inclination towards accepting;~and~``\textbf{?}'' means yet unknown.
\begin{table}[h]
\begin{tabular}{|l|l|c|}
\hline
\multicolumn{1}{|c|}{\textbf{Description}} &amp; \multicolumn{1}{c|}{\textbf{Example}} &amp; \textbf{Valid CSE?} \\
\hline
Conditional &amp; $\IF pred \THEN expr \ELSE expr$ &amp; \textbf{Y} \\
\hline
Universal quantification &amp; $\forall decl | pred @ expr$ &amp; \textbf{N} \\
\hline
Existential quantification &amp; $\exists decl | pred @ expr$ &amp; \textbf{N} \\
\hline
Unique existential quant. &amp; $\exists_1 decl | pred @ expr$ &amp; \textbf{N} \\
\hline
Function construction &amp; $\lambda decl | pred @ expr$ &amp; \textbf{Y} \\
\hline
Definite description &amp; $\mu decl | pred @ expr$ &amp; \textbf{Y} \\
\hline
Substitution expression &amp; $\LET abbrv @ expr$ &amp; \textbf{Y} \\
\hline
Schema equivalence &amp; $S \iff T$ &amp; \textbf{N} \\
\hline
Schema implication &amp; $S \implies T$ &amp; \textbf{N} \\
\hline
Schema disjunction &amp; $S \lor T$ &amp; \textbf{N} \\
\hline
Schema conjunction &amp; $S \land T$ &amp; \textbf{N} \\
\hline
Schema negation &amp; $\lnot S$ &amp; \textbf{N} \\
\hline
Schema composition &amp; $S \Comp T$ &amp; \textbf{N} \\
\hline
Schema piping &amp; $S \pipe T$ &amp; \textbf{N} \\
\hline
Schema hiding &amp; $S \hide T$ &amp; \textbf{N} \\
\hline
Schema projection &amp; $S \project T$ &amp; \textbf{N} \\
\hline
Schema precondition &amp; $\pre S$ &amp; \textbf{N} \\
\hline
Powerset &amp; $\power X$ &amp; \textbf{?} \\
\hline
Cartesian product &amp; $X \cross Y$ &amp; \textbf{N} \\
\hline
Prefix application (PRE) &amp; $f \_$ &amp; \textbf{?} \\
\hline
Prefix application (L, ERE) &amp; $a \_ b \_$ &amp; \textbf{?} \\
\hline
Prefix application (L, SRE) &amp; $a \_ ,, b \_$ &amp; \textbf{?} \\
\hline
Postfix application (POST) &amp; $X~\star$ &amp; \textbf{?} \\
\hline
Postfix application (ELP, ERP) &amp; $\_ a \_ b$ &amp; \textbf{?} \\
\hline
Postfix application (ELP, SREP) &amp; $\_ a \_,, b$ &amp; \textbf{?} \\
\hline
Infix application (I) &amp; $\_ \cup \_$ &amp; \textbf{Y} \\
\hline
Infix application (EL, ERE) &amp; $\_ a \_ b \_$ &amp; \textbf{?} \\
\hline
Infix application (EL, SRE) &amp; $\_ a \_ ,, b \_$ &amp; \textbf{?} \\
\hline
Nofix application (L, ER) &amp; $a \_ b$ &amp; \textbf{?} \\
\hline
Nofix application (L, SR) &amp; $\langle \_,,\rangle$ &amp; \textbf{Y} \\
\hline
Set extension &amp; $\{~a, b~\}$ &amp; \textbf{Y*} \\
\hline
Set comprehension &amp; $\{~ decl | pred ~\}$ &amp; \textbf{?} \\
\hline
Characteristic set comp. &amp; $\{~ decl | pred @ expr ~\}$ &amp; \textbf{?} \\
\hline
Tuple extension &amp; $(x, y, z)$ &amp; \textbf{N} \\
\hline
Characteristic definite desc. &amp; $(\mu decl | pred)$ &amp; \textbf{?} \\
\hline
Binding extension &amp; $\lblot x == 10, y == \{~\} \rblot$ &amp; \textbf{N} \\
\hline
Empty schema construction &amp; $[~]$ &amp; \textbf{N} \\
\hline
Schema construction &amp; $[ decl | pred ]$ or $[ | pred]$ &amp; \textbf{N} \\
\hline
Binding selection &amp; $S.x$ or $\lblot x == 10 \rblot$.x &amp; \textbf{Y!} \\
\hline
Tuple selection &amp; $t.1$ or $(x,y).1$ &amp; \textbf{Y!} \\
\hline
Schema decoration &amp; $S'$ or $S_1$ &amp; \textbf{Y!} \\
\hline
Binding construction &amp; $\theta S$ &amp; \textbf{Y!} \\
\hline
Function appl with Sch Expr. &amp; $f~[ decl | pred ]$ &amp; \textbf{?} \\
\hline
Generic instantiation &amp; $seq[\nat, \num]$, or $(\_ \fun \_)[X, Y]$ &amp; \textbf{Y} \\
\hline
Schema renaming &amp; $S[x/y, a/b]$ &amp; \textbf{Y!} \\
\hline
Number literal &amp; $10$ &amp; \textbf{N} \\
\hline
Reference &amp; $Name:  $ &amp; \textbf{Y} \\
\hline
\end{tabular}
\caption{Filtering the Z expression tree for channel sets}
\end{table}
At the moment, the parser implementation only filters set extension and comprehension, hence
accepting all other Z expression productions.

\begin{issue}[Including all Z restrictions]
   Add the other restrictions from table~\ref{csexpr}
\end{issue}


\begin{issue}[How are the type rules for channel set references?]
  That is, could channel set references have generic actuals, as in?
    \[
    \circchannel\ [X] c, d: X \\
    \circchannel\ [Y] e, f: Y \\

    \circchannelset\ CS1 = \lchanset c, d \rchanset \\
    \circchannelset\ CS2 = \lchanset e, f \rchanset \\
    \circchannelset\ CS3 = CS1[\nat] \cup CS2[\power~\num]
  \]
    This is a typechecking problem that shouldn't affect the parser, unless
  one wanted to restrict the generic instantiation as a parsing error, something
  that would require the use of \code{RefName} rather than \code{RefExpr}.

  Even further, as occurred with channel declaration from schemas, where we could
  possibly have channels as well as the schema generics, shouldn't we allow this
  for channel sets as well (\textit{i.e.}, shouldn't it has generic actions?
    \[
      \circchannelset\ [A, B] CS4 = CS1[\nat \cross A] \cup CS2[A \cross B]
  \]
    If this is a desired feature, the AST for ChannelSet do require modification to
  include the list of \code{DeclName} for the generic formals.
\end{issue}

\begin{issue}[decorated channel sets]
    Decorated channel sets are also valid in the parser at the moment, as it makes the
    production rules easier accepting strokes.
        \[
       CS1_0  \implies  \lchanset c_0, d_0 \rchanset
    \]
        This could be removed if needed, though.
    At the moment, I am assuming it as a typechecking rather than a parsing problem.
\end{issue}


\begin{issue}[Channel set expressions subtree --- restrictions]
    To simplify the implementation of channel set expressions, we simply encapsulate
    a Z expression (\grammar{expression}) filtered ``adequately'' (\textit{i.e.}, do not containing
    set extensions or comprehension) and include the production for \code{BasicChannelSetExpr}.

    From the expressive options to include Z applications, this is the simplest one. Nevertheless,
    as \code{BasicChannelSetExpr} is not embedded into the Z expression subtree, one cannot mix
    it with normal Z expressions. The consequence is a fairly uncompromising (verboseness) restriction.
    For example, something like
        \[
        \circchannelset CS1 == \lchanset a, b \rchanset \\
        \circchannelset CS2 == \lchanset c \rchanset \\
        \circchannelset CS3 == CS1 \cup CS2
    \]
        is valid because no Z expression is mixed with \code{BasicChannelSetExpr}, whereas something like
        \[
        \circchannelset CS3 == \lchanset a, b \rchanset \cup \lchanset c \rchanset
    \]
        is not valid because such mix occurs.

    One first (abandoned) alternative solution was to include the \code{BasicChannelSetExpr} production
    under a Z expression and use flags to say when to consider it or not. The consequences are neither
    elegant, nor desirable: clumsy code, difficulty in properly restricting the channel set expression
    tree properly, etc.
\end{issue}

\section{Conclusion}

\section{Future work}

The ideal solution for channel set expressions would be to have their own expression subtree.
This would be the neatest choice as it neither requires filtering on the Z expression subtree,
nor imposes the restrictions on mixed expressions just mentioned above. Nevertheless, it is
a quite hard choice as sorting the precedences and solving the conflicts of such subtree is
very difficult (see the \textsf{parser/tests/circus/cs\_expression.Parser.xml} file for details).

Another task for the near future is to sort out the JAXB problem from \code{ChannelDecl}.

\end{document}
</Content>
            </NarrPara>
        </ZParaList>
    </ZSect>
</Spec>

