GAfFE - A Graphical Animator Frontend for Z
===========================================
Copyright 2003 Nicholas Daley


Changelog:

12 Jul 2003 (2) -
	- Added static getBean function to BeanWrapper, that if given a BeanWrapper unwraps it, but
	  otherwise returns the Component bean it was given.
	- Added equals function to BeanLink in FormDesign.
	- Added code to FormDesign's to the addEventLink and removeEventLink functions to actually 
	  register the listener with the source bean.
		- Also added code to check that the listener was of type listenerType.

12 Jul 2003 -
	- Added paint(Graphics g, FormDesign f) function to ToolWindow.Tool
		- Called by FormDesign.glassPane's paintComponent function.
	- Ammended FormDesign.glassPane's highlight function for event links to use the correct 
	  coordinate space.
	- Ammended some bugs in the event link code in FormDesign that was comparing the component 
	  stored in a BeanLink with the current bean, not the current bean's component.  
		- Caused problems for BeanWrappered beans.
	- Ammended bug in FormDesign.setupActions that was setting highlighting to work on incoming 
	  links when it should have been for outgoing links.
	- Overrode FormDesign.setCursor to only set cursor for its glass pane.
		- Done in order to stop alternative cursors from displaying over the menu/status bars.
		- Not a very nice solution.
	- Used paint function in MakeEventLinkTool to draw line when linking events.
	- Fixed bugs in MakeEventTool causing NullPointerException.
	- MakeEventTool now displays a dialog box asking which listener type the link is for, and 
	  creates the link.
	- Ammended MakeEventTool to switch back to the default tool when finished.
	- Ammended MakeEventTool to set the cursor back to the default cursor when it is unselected.
	- Added Delete shortcut key to delete beans.
	- Made ResizeHandle.setLocation repaint the FormDesign, so that highlighted links would display
	  properly.
	- To do:
		- Add handles for event links?
		- Add ability to delete event links.
		- Add some way to identify the type of an event link.  Tooltext on a handle?

11 Jul 2003 (2) -
	- Modified 'import' headers on all .java files to conform to my preferred style.
	- Changed the glassPane in FormDesign to optionally highlight beans/event links.
	- Added view menu with options for selecting what gets highlighted.
		- Some additions to setupActions, some to setupMenus, also some new protected members
		  for tracking which options are selected.
		- Some of the actions are still lacking shortcut keys.
		- Should put them in sub-menus?
	- Added tracking of event links (not yet used).
		- Also added functions for adding/removing links/groups of links.
	- Changed FormDesign's coordinate translation functions to take a Component instead of a 
	  Container; it will save a cast in a couple of places.
	- Added loading of a 'CrossCursor' cursor in ToolWindow for use by some of the tools.
	- Added a MakeEventLinkTool to ToolWindow, doesn't yet do anything, but most of the work is 
	  edone, cursors look right.

11 Jul 2003 -
	- Forgot to add 'deleteIcon.gif' on the last commit. (added.)

 7 Jul 2003 -
	- Added tool for removing beans.
		- Added removeBean functions to FormDesign and Form.
		- Added property to tools 'oneShot' that is true if the tool should be unselected 
		  immediately after being selected.  i.e. its entire action takes place when the tool
		  is selected.
	- Went back to a handle instead of a tool for moving beans.
		- Integrated with ResizeHandle this time.
		- Commented out everything in ToolWindow related to the MoveBeanTool.
	- Tasks that need doing:
		- possibly renaming the ResizeHandle class to reflect that it also handles moving.
	- Changed highlighting on the selected tool's button in ToolWindow to use BevelBorder, and a 
	  change in colour.
	- Fixed error in ToolWindow.PlaceBeanTool.mouseDragged to use the correct coordinate space (the
	  glass pane's coordinate space, not the bean's parent's).

26 Jun 2003 - Some changes made after suggestions from Mark U.
	- Gave the tool window a title.
	- Changed the PlaceBeanTool to be one shot - ie it switches back to the select tool after 
	  placing one bean.
	- Changed ToolWindow.Tool's default select() and unselect() methods to change the button's 
	  border to a raised EtchedBorder when the tool is selected.

25 Jun 2003 - 
	- Added ability to put beans inheriting from Component in the Form; and the requirement that
	  Components go in the Form, non-Components go outside.
		- Modifications made to ResizeHandle to allow associated components that weren't direct
		  children of the beanPane.
		- Modifications to FormDesign, giving utility functions for translating between 
		  coordinate spaces, check if placement of a bean at a location is permissible.
		- Modifications to ToolWindow's tools to handle multiple levels of Forms.
		- Most of these changes should be forward compatible to the possibility of nested 
		  Forms.
	- Fixed Move tool's cursor to only show over movable object.

23 Jun 2003 (2) -
	- Changed Rules.mk's doc rule to 'mkdir -p' instead of just 'mkdir' the api directory.
	- Blocked the 'doc' directory's makefile from recursing deeper.
	- Added icons for various windows.
	- Added new functions to ToolWindow.Tool - selected, unselected.  Called when tool is selected
	  and in its argument-taking form when a FormDesign learns that the tool is selected.
	- Removed cursor property from ToolWindow.Tool.  Tools can achieve the same effect by setting
	  the cursor on FormDesigns themselves.
	- Added oldTool property to ToolChangeEvent.
	- Made some protected members of ToolWindow private.
	- Added some API documentation.

23 Jun 2003 - False start on inserting components into FormDesign's Form.  
	- See cvs branch pre-milestone-0-false-start-form-insertion

19 Jun 2003 - 
	- Modified lib/Makefile to remove the .tmp file that I presume is made by jar
	- Added ScriptDelegate bean.  A bean (for use in interface designs) that listens for
	  ActionEvents, and uses the BSFServiceProvider service to run a script.
	- Added display of bean type to FormDesign's status bar
	- Corrected FormDesign.setCurrentBeanComponent() to set the status bar with the bean, not the
	  component.  So it will display properly for beans wrapped in a BeanWrapper.
	- Added cursors to tools.
		- At present this is very basic.  Something more complex might be useful; so, for
		  example, the move tool might only have a different cursor when above a bean.
		- Should this be handled by the tool's other functions?
		- Should Tool objects have a method that is called when they are selected?
	- Changed preferred size of tool icons to 32x32 instead of 16x16
	- Commented out code (in FormDesign.java) that quit when a FormDesign is closed.  Added code 
	  (in DesignerCore) that quit when the last window is closed.

17 Jun 2003 - Added tab/shift-tab cycling through beans. + more
	- In FormDesign, made InputMap and AbstractMap 'children' of the DesignerCore's maps.
	- Added "Next Bean"(Tab) and "Previous Bean"(shift Tab) actions to the maps.
		- Tried doing this with FocusTraversalPolicy, just got messy.
	- Blocked any component from taking focus other than the layered pane created in 
	  setupLayeredPanes
	- Added PropertyChangeListeners to make everywhere that a bean's name property appears change
	  when the name property changes.
	- Enabled proper handling of non-component beans (untested)
		- Added a member currentComponent that tracks the component of a bean (either the bean
		  itself or a BeanWrapper).
		- Renamed the setCurrentBean function in FormDesign to setCurrentBeanComponent.  
		  It will unwrap BeanWrappers to set the currentBean member as well.
	- Renamed getCurrentComponent to getCurrentBeanComponent
	- Changed the creation of the Form in FormDesign to use the addBean function.
	- Removed the MoveHandle class, and all references to it. (it was made redundant by the
	  MoveBeanTool a couple of commits ago).
	- Added a nasty hack to PropertiesWindow to send PropertyChangeEvents for the name property
	  that Components don't send themselves.
	- Added functions to IntrospectionHelper for dealing with listeners:
		- providesEventSet returns true if the class can register a given type of listener.
		- addBeanListener registers a given listener of a given type with a given bean.
		- addBeanListener unregisters a given listener of a given type with a given bean.

16 Jun 2003 - Moved PropertiesWindow to the DesignerCore
	- BeanSelectedEvent and BeanSelectedListener are now public types, so they can be used by
	  PropertiesWindow.
	- PropertiesWindow is now a BeanSelectedListener.
	- Removed PropertyChangeSupport from FormDesign, because beanSelectedListeners is now doing its
	  job.
	- Removed setupActions function from FormDesign (wasn't getting called since this was moved to
	  DesignerCore.java).
	- Removed setupToolbar function from FormDesign (was commented out since this was moved to
	  ToolWindow.java).

13 Jun 2003 - Groundwork for having multiple form design windows, + more.
	- Expanded ToolWindow.Tool and its subclasses to include functions for carrying out 
	- Created ToolWindow.SelectBeanTool
	- Created Listener and Event classes for ToolChange, and for BeanSelected
		- used respectively by ToolWindow when a tool is selected, and by FormDesign when a 
		  bean is selected.
	- Modified FormDesign to use 'Tool' provided by ToolWindow (is now a ToolChangeListener) 
	  instead of the BeanInfo tool from its old toolbar.
	- Makefile -  'lib' directory is no longer removed by a 'squeaky' clean.
	- renamed FormDesign.contentPane to FormDesign.beanPane to avoid confusion with RootPane's 
	  contentPane property.
	- Made FormDesign.StatusBar class, instead of using a JLabel for the status bar.
	- Added function FormDesign.addBean, used by ToolWindow.PlaceBeanTool.  Adds a new bean to the
	  form.
	- Discontinued use of MoveHandle (though not deleted yet).
	- Due to moving of responsibilities from FormDesign to DesignerCore, it is (at present) not 
	  possible to open the properties window.  This will be fixed in the next commit, when keeping
	  the reference to the properties window, will be managed by the DesignerCore.
	- Tasks that need to be done soon:
		- Move the PropertiesWindow to the DesignerCore
		- Fix all code that assumes a bean is a component. (Mostly in FormDesign.java).
		- Add the ability to put components inside the Form.
		- Stop non-component beans from going in the Form, stop component beans from going 
		  outside the form.
		- Hack up a fix to make PropertyChangeEvents get sent to the listeners on a component
		  for changes to the 'name' property.  (Components, and possibly other bean types don't
		  trigger a PropertyChangeEvent when the name property changes; this is annoying when
		  we want status bars, etc. to update).
		- Determine if problems are caused by having only the one copy of  the window menu.  Is
		  it permissible to have one menu in two menu bars.  (i.e. the one JMenu object serving
		  two windows).
	
 4 Jun 2003 - (not committed)
	- Moved DesignerCore.java to the czt.animation.gui.design package.
	- Created ToolWindow.java in the czt.animation.gui.design package.
		- Created 'resources' directory for holding non .class files destined for the jar file.
	- Modified DesignerCore.java to be more than just a shell.
		- Tried BeanContextServices for tracking ToolWindow, PropertiesWindow, ActionMap,
		  InputMap, window JMenu.  Changed to constructor parameters instead.  Becomes overly
		  complicated for this purpose.
		- Keeps track of 'FormDesign's
		- Keeps instance of ToolWindow
	- Eliminated need for temp directory - changed manifest file to be intermediate target.
	- Removed main function in FormDesign.java - used for testing. 

28 May 2003 - Some progress on the properties table:
	- Now uses my TableCellEditor class (PropertiesWindow.PropertyCellEditor).
	- Setting, canceling, etc. work without exceptions.
	- The PropertyCellEditor and PropertiesTable classes need some reworking, there are bits that 
	  may be better if they were moved.  e.g. setting the values in the property editor should
	  probably be done in PropertiesTable.setValueAt instead of PropertyCellEditor.stopCellEditing.
	- At the moment there is a PropertyChangeListener attached to the FormDesign class's form 
	  member to catch changes to the 'name' property, and change the title in its border.  However
	  Components don't seem to call PropertyChangeListeners for the name property!  So, at the 
	  moment, the form's title won't change.
		- This problem is probably shared by the status bar.
	- Needs thorough testing.

27 May 2003 - First commit to CVS:
	- Placing of beans in Form Design window works.
	- Display of properties, methods, and events working.
	- Editing of properties partially working. (Need to sort out stuff between the visual 
	  component, the table it's in, and the property itself.)
	- Before Milestone 0, need:
		- to fix editing of properties completely.
		- ability to link beans via events.
		- ability to work on multiple forms.
		- ability to place component beans visually inside the form being designed.
	- Thoughts:
		- May be desirable to move toolbar into its own window, if there's going to be multiple
		  forms.
		- May want to add seperate tool for moving beans, rather than just click-dragging on 
		  them.  Makes things easier when beans are allowed to be placed inside the form.