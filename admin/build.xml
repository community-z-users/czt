<project name="czt" default="release" basedir=".">
  <!-- location of the czt directory -->
  <property name="czt.dir" location=".."/>
  <!-- The package name -->
  <property name="package.name" value="corejava"/>
  <!-- Version number as it is used in the file name -->
  <property name="version" value="1_1_2"/>

  <property name="root.directory" value="${package.name}_${version}"/>
  <property name="release.name" value="${root.directory}_src"/>

  <target name="init">
    <ant dir="${czt.dir}/corejava" target="clean"/>
  </target>

  <target name="tar" depends="init">
    <tar destfile="${release.name}.tar">
      <!-- Include the zml directory -->
      <tarfileset dir="${czt.dir}/zml"
        prefix="${root.directory}/zml">
        <exclude name="*.dtd"/>
        <exclude name="NOTES.txt"/>
      </tarfileset>
      <!-- Include the corejava directory -->
      <tarfileset dir="${czt.dir}/corejava"
        prefix="${root.directory}/corejava">
      </tarfileset>
      <!-- LICENSE File -->
      <tarfileset dir="${czt.dir}/corejava"
        fullpath="${root.directory}/LICENSE.txt">
        <include name="COPYING.txt"/>
      </tarfileset>
      <!-- README -->
      <tarfileset dir="${czt.dir}"
        fullpath="${root.directory}/README.txt">
        <include name="README.txt"/>
      </tarfileset>
      <!-- czt.properties -->
      <tarfileset dir="${czt.dir}"
        fullpath="${root.directory}/czt.properties">
        <include name="czt.properties"/>
      </tarfileset>
    </tar>
  </target>

  <target name="tgz" depends="tar">
    <gzip src="${release.name}.tar" zipfile="${release.name}.tar.gz"/>
  </target>

  <target name="bz2" depends="tar">
    <bzip2 src="${release.name}.tar" zipfile="${release.name}.tar.bz2"/>
  </target>

  <target name="extract" depends="tar">
    <untar src="${release.name}.tar" dest="."/>
  </target>

  <target name="zip" depends="extract">
    <zip destfile="${release.name}.zip"
         basedir="${root.directory}"
         update="true"/>
  </target>

  <target name="release" depends="tgz, bz2, zip"/>

  <target name="clean">
    <delete dir="${root.directory}"/>
    <delete>
      <fileset dir="." includes="${release.name}.*"/>
    </delete>
  </target>
</project>
